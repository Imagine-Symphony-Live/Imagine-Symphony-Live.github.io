{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/images/bloom-128x128.png","webpack:///./assets/images/bloom-32x32.png","webpack:///./assets/images/environments/bookstore/bookstore_background_left.svg","webpack:///./assets/images/environments/bookstore/bookstore_background_right.svg","webpack:///./assets/images/environments/bookstore/bookstore_foreground_left.svg","webpack:///./assets/images/environments/bookstore/bookstore_foreground_right.svg","webpack:///./assets/images/environments/bus/bus_foreground_left.svg","webpack:///./assets/images/environments/bus/bus_foreground_right.svg","webpack:///./assets/images/environments/desert/desert_background_left.svg","webpack:///./assets/images/environments/desert/desert_background_right.svg","webpack:///./assets/images/environments/desert/desert_foreground_left.svg","webpack:///./assets/images/environments/desert/desert_foreground_right.svg","webpack:///./assets/images/environments/forest/forest_background_left.svg","webpack:///./assets/images/environments/forest/forest_background_right.svg","webpack:///./assets/images/environments/forest/forest_foreground_left.svg","webpack:///./assets/images/environments/forest/forest_foreground_right.svg","webpack:///./assets/images/environments/lake/lake_background_left.svg","webpack:///./assets/images/environments/lake/lake_background_right.svg","webpack:///./assets/images/environments/lake/lake_foreground_left.svg","webpack:///./assets/images/environments/lake/lake_foreground_right.svg","webpack:///./assets/images/environments/mountain/mountain_background_left.svg","webpack:///./assets/images/environments/mountain/mountain_background_right.svg","webpack:///./assets/images/environments/mountain/mountain_foreground_left.svg","webpack:///./assets/images/environments/mountain/mountain_foreground_right.svg","webpack:///./assets/images/instrument-icons/insicon_bass.svg","webpack:///./assets/images/instrument-icons/insicon_brass.svg","webpack:///./assets/images/instrument-icons/insicon_cello.svg","webpack:///./assets/images/instrument-icons/insicon_clarinet.svg","webpack:///./assets/images/instrument-icons/insicon_cymbals.svg","webpack:///./assets/images/instrument-icons/insicon_flute.svg","webpack:///./assets/images/instrument-icons/insicon_harp.svg","webpack:///./assets/images/instrument-icons/insicon_horn.svg","webpack:///./assets/images/instrument-icons/insicon_keyboard.svg","webpack:///./assets/images/instrument-icons/insicon_oboe.svg","webpack:///./assets/images/instrument-icons/insicon_string.svg","webpack:///./assets/images/instrument-icons/insicon_tamtam.svg","webpack:///./assets/images/instrument-icons/insicon_timpani.svg","webpack:///./assets/images/instrument-icons/insicon_trumpet.svg","webpack:///./assets/images/logo.png","webpack:///./assets/images/note-notations/16-dot-down.svg","webpack:///./assets/images/note-notations/16-dot-up.svg","webpack:///./assets/images/note-notations/16-down.svg","webpack:///./assets/images/note-notations/16-up.svg","webpack:///./assets/images/note-notations/2-dot-down.svg","webpack:///./assets/images/note-notations/2-dot-trem-down.svg","webpack:///./assets/images/note-notations/2-dot-trem-up.svg","webpack:///./assets/images/note-notations/2-dot-up.svg","webpack:///./assets/images/note-notations/2-down.svg","webpack:///./assets/images/note-notations/2-trem-down.svg","webpack:///./assets/images/note-notations/2-trem-up.svg","webpack:///./assets/images/note-notations/2-up.svg","webpack:///./assets/images/note-notations/32-down.svg","webpack:///./assets/images/note-notations/32-up.svg","webpack:///./assets/images/note-notations/4-dot-down.svg","webpack:///./assets/images/note-notations/4-dot-trem-down.svg","webpack:///./assets/images/note-notations/4-dot-trem-up.svg","webpack:///./assets/images/note-notations/4-dot-up.svg","webpack:///./assets/images/note-notations/4-down.svg","webpack:///./assets/images/note-notations/4-trem-up.svg","webpack:///./assets/images/note-notations/4-up.svg","webpack:///./assets/images/note-notations/8-dot-down.svg","webpack:///./assets/images/note-notations/8-dot-up.svg","webpack:///./assets/images/note-notations/8-down.svg","webpack:///./assets/images/note-notations/8-trem-down.svg","webpack:///./assets/images/note-notations/8-trem-up.svg","webpack:///./assets/images/note-notations/8-up.svg","webpack:///./assets/images/stage_complete.svg?ce4f","webpack:///./assets/images/stage_complete.svg?e0ec","webpack:///./assets/images/stage_complete.svg?815e","webpack:///./assets/images/stage_complete.svg?a907","webpack:///./assets/images/stage_complete.svg","webpack:///./assets/images/stage_complete.svg?08c1","webpack:///./assets/images/stage_complete.svg?f1a4","webpack:///./assets/images/stage_complete.svg?6b79","webpack:///./assets/images/stage_complete.svg?5802","webpack:///./assets/images/stage_complete.svg?6d94","webpack:///./assets/images/stage_complete.svg?339b","webpack:///./assets/images/stage_complete.svg?517c","webpack:///./assets/images/stage_complete.svg?dffc","webpack:///./assets/images/stage_complete_2.svg","webpack:///./assets/images/title-bkg.jpg","webpack:///./assets/images/video-bkg.png","webpack:///./assets/images/video-mask-flat.png","webpack:///./assets/images/video-mask.png","webpack:///./assets/video/imagine-symphony-live-1080p.mp4","webpack:///./assets/video/imagine-symphony-live-360p.mp4","webpack:///./assets/video/imagine-symphony-live-720p.mp4","webpack:///./src/arrow-graphic.ts","webpack:///./src/button.ts","webpack:///./src/color-utils.ts","webpack:///./src/colors.ts","webpack:///./src/constants.ts","webpack:///./src/css/styles.css?05af","webpack:///./src/draggable-spawn.ts","webpack:///./src/draggable.ts","webpack:///./src/environment-layer.ts","webpack:///./src/gradient-backdrop.ts","webpack:///./src/interactive-instrument.ts","webpack:///./src/interactive.ts","webpack:///./src/lerp.ts","webpack:///./src/main.ts","webpack:///./src/on-demand-emitter.ts","webpack:///./src/path-particle.ts","webpack:///./src/performance-state.ts","webpack:///./src/performance-video-player.ts","webpack:///./src/progress-bar.ts","webpack:///./src/score-reveal.ts","webpack:///./src/state-machine.ts","webpack:///./src/state.ts","webpack:///./src/styles.ts","webpack:///./src/title-state.ts","webpack:///./src/tracks/main/index.ts","webpack:///./src/tracks/main/instrument-motion-fn.ts","webpack:///./src/tracks/main/track-interactives.ts","webpack:///./src/video-player.ts"],"names":[],"mappings":";QAAA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,iBAAiB,4BAA4B;QAC7C;QACA;QACA,kBAAkB,2BAA2B;QAC7C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA;QACA;QACA;QACA,gBAAgB,uBAAuB;QACvC;;;QAGA;QACA;QACA;QACA;;;;;;;;;;;;ACvJA,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;;ACAxC;AAAe,2EAAY,yO;;;;;;;;;;;;ACA3B;AAAe,2EAAY,uR;;;;;;;;;;;;ACA3B;AAAe,2EAAY,4X;;;;;;;;;;;;ACA3B;AAAe,2EAAY,oS;;;;;;;;;;;;ACA3B;AAAe,2EAAY,oQ;;;;;;;;;;;;ACA3B;AAAe,2EAAY,2V;;;;;;;;;;;;ACA3B;AAAe,2EAAY,6S;;;;;;;;;;;;ACA3B;AAAe,2EAAY,wa;;;;;;;;;;;;ACA3B;AAAe,2EAAY,+X;;;;;;;;;;;;ACA3B;AAAe,2EAAY,oR;;;;;;;;;;;;ACA3B;AAAe,2EAAY,8R;;;;;;;;;;;;ACA3B;AAAe,2EAAY,8R;;;;;;;;;;;;ACA3B;AAAe,2EAAY,6N;;;;;;;;;;;ACA3B,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;;;ACAxC,iBAAiB,qBAAuB,wD;;;;;;;;;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","file":"assets/js/bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"vendor\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"assets/images/3189f111c098afc68f57fbdd560dd1cf.png\";","module.exports = __webpack_public_path__ + \"assets/images/6ab0c09e6e8c786d6ffb05e449f07e58.png\";","module.exports = __webpack_public_path__ + \"assets/images/01617ab5f4719c550a3f31532afd57f1.png\";","module.exports = __webpack_public_path__ + \"assets/images/415ef894914b103957969db264b02a1f.png\";","module.exports = __webpack_public_path__ + \"assets/images/70c12c9efa856cbf6e73dff83e920ba8.png\";","module.exports = __webpack_public_path__ + \"assets/images/0f0274f9b2cf3c8cf89214168b97f2a0.png\";","module.exports = __webpack_public_path__ + \"assets/images/bd3e64dd39a77545b840f9a74d196572.png\";","module.exports = __webpack_public_path__ + \"assets/images/0cd78542b17047981f735f94c74fbbdc.png\";","module.exports = __webpack_public_path__ + \"assets/images/10e9fd230ab8c406196ecea86a906d36.png\";","module.exports = __webpack_public_path__ + \"assets/images/a442aa2b513bf4f29746705a057b29cb.png\";","module.exports = __webpack_public_path__ + \"assets/images/8d62ca4952da5348ebf209e5d7c7c300.png\";","module.exports = __webpack_public_path__ + \"assets/images/bbd2420fd0d42b86d6dfb24bbf4d90f2.png\";","module.exports = __webpack_public_path__ + \"assets/images/c890fa2627236e30596baf3318fca66b.png\";","module.exports = __webpack_public_path__ + \"assets/images/1f8b5f38fa669df3d21cade0a34ec1de.png\";","module.exports = __webpack_public_path__ + \"assets/images/bd3b5ed4b920ba40393d910820b41819.png\";","module.exports = __webpack_public_path__ + \"assets/images/1c6f29ee3aac9991e25ccd2f0113ddbe.png\";","module.exports = __webpack_public_path__ + \"assets/images/d8e7db81f3757d83b58e114791e1831e.png\";","module.exports = __webpack_public_path__ + \"assets/images/85bf7af9bafae78112e5118db1f3278e.png\";","module.exports = __webpack_public_path__ + \"assets/images/2b2f09469b93f8ef37a4d14b64e1e781.png\";","module.exports = __webpack_public_path__ + \"assets/images/1130d1b2e7a064b6fd109865ad227ec5.png\";","module.exports = __webpack_public_path__ + \"assets/images/7b4b4d3ae44681aa73f9459ecb0e55ca.png\";","module.exports = __webpack_public_path__ + \"assets/images/c491630a84e100b5c7ecec95dea5ec79.png\";","module.exports = __webpack_public_path__ + \"assets/images/ca1f3b73fb8fc44d03b6ea10654a168b.png\";","module.exports = __webpack_public_path__ + \"assets/images/4fc999b873a6343cec8574fac6222298.png\";","module.exports = __webpack_public_path__ + \"assets/images/a793fbb174630c63bf4d4ca0b0d8ca7c.png\";","module.exports = __webpack_public_path__ + \"assets/images/377a9a1ab0565e85240ec78d42aa13e2.png\";","module.exports = __webpack_public_path__ + \"assets/images/96ae1c4d438413643f7d5a83c1832bba.png\";","module.exports = __webpack_public_path__ + \"assets/images/0cd6dc32444107d70333c50c859ec027.png\";","module.exports = __webpack_public_path__ + \"assets/images/475e35e0f264bccc1e74db614b708006.png\";","module.exports = __webpack_public_path__ + \"assets/images/a44c867bfe80a6c501af05cd29f51f9b.png\";","module.exports = __webpack_public_path__ + \"assets/images/7550a4008f84c7191de51589d0efbd8b.png\";","module.exports = __webpack_public_path__ + \"assets/images/818540cd5989dfd90ae8ad673399c68f.png\";","module.exports = __webpack_public_path__ + \"assets/images/a99929a5419d5296a6ffe4c140a7584d.png\";","module.exports = __webpack_public_path__ + \"assets/images/0cd6dc32444107d70333c50c859ec027.png\";","module.exports = __webpack_public_path__ + \"assets/images/3bc2991c22e935a54efe5a40aa926247.png\";","module.exports = __webpack_public_path__ + \"assets/images/be4efe78b7cd0a84c6f366ef48bf570a.png\";","module.exports = __webpack_public_path__ + \"assets/images/b003f1a31dfcc827cb8afcda16228bf0.png\";","module.exports = __webpack_public_path__ + \"assets/images/377a9a1ab0565e85240ec78d42aa13e2.png\";","module.exports = __webpack_public_path__ + \"assets/images/6d3202b03f5d82f92ff29405687242d4.png\";","module.exports = __webpack_public_path__ + \"assets/images/d8f1205e4a0afb21d6eaefbabe766d32.png\";","module.exports = __webpack_public_path__ + \"assets/images/2cd007337fabe655a3347efb826291cf.png\";","module.exports = __webpack_public_path__ + \"assets/images/a638c204ea86a91ea64051a4fc987011.png\";","module.exports = __webpack_public_path__ + \"assets/images/d79e05eab95cdca503e938963688893f.png\";","module.exports = __webpack_public_path__ + \"assets/images/50a2ae6faeb088379843a98604e66f62.png\";","module.exports = __webpack_public_path__ + \"assets/images/e67f947befe15f7d4236b3737fc439fa.png\";","module.exports = __webpack_public_path__ + \"assets/images/0b86a5fd78f04b80ac3224269888c388.png\";","module.exports = __webpack_public_path__ + \"assets/images/ddb0bdadc4854449af96b6abc01b6807.png\";","module.exports = __webpack_public_path__ + \"assets/images/9546d645495e0959fffee1086d5ef6ca.png\";","module.exports = __webpack_public_path__ + \"assets/images/3d2bdd28715097d999ea9aef328fcf8d.png\";","module.exports = __webpack_public_path__ + \"assets/images/ac47719e898a8f46a94936d59d0ea0b7.png\";","module.exports = __webpack_public_path__ + \"assets/images/9763ab5a1ae783e06fe5f007aac313e1.png\";","module.exports = __webpack_public_path__ + \"assets/images/ddd33784dc18d6668486e9da86df53b6.png\";","module.exports = __webpack_public_path__ + \"assets/images/12cfd8711686bd2d5a3be0a89326262d.png\";","module.exports = __webpack_public_path__ + \"assets/images/20230371a474b5ea1b88d3faac7434d2.png\";","module.exports = __webpack_public_path__ + \"assets/images/bead805f8b6afe8b0780258d544bfdff.png\";","module.exports = __webpack_public_path__ + \"assets/images/a166eb20c532bb3405473fe9ffd7c692.png\";","module.exports = __webpack_public_path__ + \"assets/images/27788a77bc9b60ff19b7e3eb9b4ecb3c.png\";","module.exports = __webpack_public_path__ + \"assets/images/f7220eafb638a02f08bf7ed9e65aaa08.png\";","module.exports = __webpack_public_path__ + \"assets/images/d76cc473861daa68c56d211c4d3af450.png\";","module.exports = __webpack_public_path__ + \"assets/images/a6646df4373193fc68ebf9c6c2d0415e.png\";","module.exports = __webpack_public_path__ + \"assets/images/59e618a4e79e7e6121f8132b6c476aa0.png\";","module.exports = __webpack_public_path__ + \"assets/images/009d1b6fa6a453d151fe850d309bbef3.png\";","module.exports = __webpack_public_path__ + \"assets/images/df63a282db114338bc3f7c7f1f954807.png\";","module.exports = __webpack_public_path__ + \"assets/images/18965db09f203c0a340d30ad7d033b40.png\";","module.exports = __webpack_public_path__ + \"assets/images/fbcbaf553f64109eb3828b096afb8d26.png\";","module.exports = __webpack_public_path__ + \"assets/images/ef31de50322dd5e662ebaa156e5539b3.png\";","export default function() {this.moveTo(631.53,83.52).lineTo(673.35,62.47).bezierCurveTo(718.3,84.84,757.65,111.96,787.78,143.5).lineTo(787.78,143.5).lineTo(701.02,143.44).lineTo(701.02,143.14).bezierCurveTo(682.8,120.82,659.25,100.7,631.53,83.52).closePath();}","export default function() {this.moveTo(561.17,49.64).lineTo(585.18,27.63).bezierCurveTo(550.42,17.08,513.38,9.31,474.7,4.74).lineTo(474.7,4.74).lineTo(462.38,25.59).lineTo(462.38,25.59).bezierCurveTo(480.94,28.08,498.97,31.55,516.34,35.91).bezierCurveTo(531.83,39.8,546.81,44.39,561.17,49.64).closePath();}","export default function() {this.moveTo(561.13,49.72).lineTo(585.14,27.71).bezierCurveTo(591.77,29.72,598.32,31.83,604.78,34.04).lineTo(604.78,34.04).lineTo(604.78,34.04).bezierCurveTo(628.83,42.27,651.81,51.82,673.41,62.57).lineTo(631.6,83.62).bezierCurveTo(612.51,71.79,591.44,61.37,568.75,52.58).lineTo(568.75,52.58).lineTo(568.75,52.58).bezierCurveTo(566.22,51.61,563.68,50.66,561.13,49.72).closePath();}","export default function() {this.moveTo(485.89,122.48).lineTo(516.33,95.95).lineTo(516.33,95.95).bezierCurveTo(595.56,115.83,661.14,154.22,701.13,203.2).lineTo(701.13,203.5).lineTo(511.06,203.5).lineTo(511,203.5).bezierCurveTo(505,182.5,480.71,163.95,449.5,154.19).lineTo(449.5,154.2).lineTo(485.89,122.48).closePath();}","export default function() {this.moveTo(0,143.5).lineTo(129.51,143.5).lineTo(129.51,143.49).bezierCurveTo(138.35,130.1,149.79,117.53,163.43,106.02).lineTo(163.43,106.02).lineTo(65.45,89.99).lineTo(65.45,89.98).bezierCurveTo(40.89,106.21,18.73,123.98,0,143.5).lineTo(0,143.5).closePath();}","export default function() {this.moveTo(474.7,4.78).bezierCurveTo(448.17,1.64,420.87,0,393,0).bezierCurveTo(342.61,0,294.1,5.35,248.64,15.25).lineTo(248.64,15.25).lineTo(271.23,35.31).lineTo(271.23,35.31).bezierCurveTo(309.02,26.05,349.88,21,392.5,21).bezierCurveTo(416.43,21,439.79,22.59,462.38,25.63).lineTo(462.38,25.63).lineTo(474.7,4.78).lineTo(474.7,4.78).closePath();}","export default function() {this.moveTo(187.1,31.96).bezierCurveTo(206.79,25.47,227.5,19.85,248.64,15.25).lineTo(248.64,15.25).lineTo(271.23,35.31).lineTo(284.64,47.22).bezierCurveTo(268.76,51.27,253.62,56.19,239.34,61.87).lineTo(239.4,61.89).bezierCurveTo(235.64,63.41,232.08,64.92,228.72,66.4).lineTo(187.1,31.96).closePath();}","export default function() {this.moveTo(187.1,31.96).bezierCurveTo(183.39,33.18,179.7,34.44,176.05,35.73).lineTo(176.02,35.72).bezierCurveTo(176.02,35.72,152.26,43.14,119.02,59.44).lineTo(119.05,59.45).bezierCurveTo(99.97,68.73,81.95,78.94,65.2,90).lineTo(65.2,90.01).lineTo(163.18,106.04).lineTo(163.18,106.04).bezierCurveTo(175.16,95.94,188.84,86.66,203.96,78.36).bezierCurveTo(210.2,74.99,218.41,70.84,228.47,66.42).lineTo(187.1,31.96).closePath();}","export default function() {this.moveTo(485.89,122.48).lineTo(449.5,154.2).lineTo(449.5,154.19).bezierCurveTo(432.78,148.96,413.73,146,393.5,146).bezierCurveTo(373.29,146,354.24,148.96,337.53,154.18).lineTo(337.53,154.19).lineTo(301.78,122.45).lineTo(301.78,122.45).bezierCurveTo(330.19,114.55,361.13,110.21,393.5,110.21).bezierCurveTo(426.19,110.21,457.36,114.46,486,122.51).lineTo(485.89,122.48).closePath();}","export default function() {this.moveTo(129.51,203.5).lineTo(275.66,203.5).lineTo(275.66,203.5).bezierCurveTo(277.66,197.36,280.99,191.5,285.48,186.03).lineTo(285.51,186).lineTo(163.42,166.03).lineTo(163.42,166.03).bezierCurveTo(149.79,177.53,138.36,190.1,129.51,203.5).lineTo(129.51,203.5).closePath();}","export default function() {this.moveTo(163.43,166.02).bezierCurveTo(194.13,140.13,235.99,119.62,284.64,107.21).lineTo(284.64,107.21).lineTo(337.53,154.18).lineTo(337.53,154.17).bezierCurveTo(314.97,161.22,296.66,172.41,285.49,186.02).lineTo(285.52,185.99).lineTo(163.43,166.02).lineTo(163.43,166.02).closePath();}","export default function() {this.moveTo(393.89,80.2).lineTo(393.89,51).bezierCurveTo(393.46,51,394.32,51,393.89,51).bezierCurveTo(351.27,51,322.26,52.39,284.47,61.65).lineTo(284.67,70.3).lineTo(284.75,77.34).lineTo(301.89,92.56).lineTo(301.89,92.56).bezierCurveTo(330.3,84.66,361.52,80.2,393.89,80.2).closePath();}","export default function() {this.moveTo(393.89,80.2).lineTo(393.89,51).bezierCurveTo(437.02,51.1,478.31,56.38,516.44,65.95).lineTo(516.44,65.95).lineTo(486,92.48).lineTo(486.17,92.67).bezierCurveTo(457.52,84.62,426.58,80.2,393.89,80.2).closePath();}","module.exports = __webpack_public_path__ + \"assets/images/e643864cfff4a51ee1dee9943fb433a2.png\";","module.exports = __webpack_public_path__ + \"assets/images/f25490ae7aa43495d79babe80ce53636.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/994c37c4c6ab966a9fd675772d69e84e.png\";","module.exports = __webpack_public_path__ + \"assets/images/1d9d48aed6a0ebd1c3a8f2cad00a82c7.png\";","module.exports = __webpack_public_path__ + \"assets/images/8f284b106b34ef2f63279f12b25f01e6.png\";","module.exports = __webpack_public_path__ + \"assets/video/3d813497be16250f5fdfd57412d4bb3b.mp4\";","module.exports = __webpack_public_path__ + \"assets/video/60ed1faa41c55fd1f042bf11097e7d74.mp4\";","module.exports = __webpack_public_path__ + \"assets/video/b42474300677737e87d68bd4b0cc848b.mp4\";","import { Graphics, Container } from \"pixi.js\";\n\nconst ARROW_THICK = 5;\nconst ARROW_HEAD = 20;\nconst ARROW_ANGLE = 1.2 * Math.PI / 4;\nconst PAD_LENGTH = 0;\nconst ARROW_HEAD_LENGTH = Math.cos(ARROW_ANGLE) * ARROW_HEAD;\n\nexport default class ArrowGraphic extends Container {\n  protected graphics = new Graphics();\n  private needsDraw = true;\n  private slidei = 0;\n  private _angle: number;\n  private arrowP1: number;\n  private arrowP2: number;\n  private arrowP3: number;\n  private arrowP4: number;\n\n  constructor(public fromPoint: [number, number], private _toPoint: [number, number]) {\n    super();\n    this.draw();\n    this.addChild(this.graphics);\n    this.toPoint = _toPoint;\n  }\n\n  set toPoint([x, y] : [number, number]) {\n    this._toPoint = [x, y];\n    this.needsDraw = true;\n\n    this._angle = Math.atan2(this._toPoint[0] - this.fromPoint[0], this._toPoint[1] - this.fromPoint[1]) + Math.PI/2;\n    this.arrowP1 = Math.sin(this._angle - Math.PI - ARROW_ANGLE);\n    this.arrowP2 = Math.cos(this._angle - Math.PI - ARROW_ANGLE);\n    this.arrowP3 = Math.sin(this._angle + ARROW_ANGLE);\n    this.arrowP4 = Math.cos(this._angle + ARROW_ANGLE);\n  }\n\n  tick(delta: number) {\n    this.slidei += delta / 2;\n    this.slidei = this.slidei % (Math.PI * 2);\n    const slidePos = Math.cos(this.slidei) * 10;\n\n    this.graphics.position.set(Math.cos(this._angle) * slidePos, - Math.sin(this._angle) * slidePos);\n\n    if(this.needsDraw) {\n      this.draw();\n    }\n  }\n\n  draw() {\n    this.needsDraw = false;\n\n      this.graphics.clear()\n      .lineStyle(ARROW_THICK, 0xffffff, 1)\n      .moveTo(this.fromPoint[0] - Math.cos(-this._angle) * PAD_LENGTH, this.fromPoint[1] - Math.sin(-this._angle) * PAD_LENGTH)\n      .lineTo(this._toPoint[0] + Math.cos(-this._angle) * (PAD_LENGTH + ARROW_HEAD_LENGTH + ARROW_THICK), this._toPoint[1] + Math.sin(-this._angle) * (PAD_LENGTH + ARROW_HEAD_LENGTH + ARROW_THICK))\n      .lineStyle(1, 0xffffff, 1)\n      .beginFill(0xffffff)\n      .drawPolygon([\n        this._toPoint[0] + Math.cos(-this._angle) * PAD_LENGTH,\n        this._toPoint[1] + Math.sin(-this._angle) * PAD_LENGTH,\n        this._toPoint[0] + Math.cos(-this._angle) * PAD_LENGTH + this.arrowP1 * ARROW_HEAD,\n        this._toPoint[1] + Math.sin(-this._angle) * PAD_LENGTH + this.arrowP2 * ARROW_HEAD,\n        this._toPoint[0] + Math.cos(-this._angle) * PAD_LENGTH + this.arrowP3 * ARROW_HEAD,\n        this._toPoint[1] + Math.sin(-this._angle) * PAD_LENGTH + this.arrowP4 * ARROW_HEAD,\n      ])\n  }\n}","import { Container, Text } from \"pixi.js\";\nimport { TEXT_STYLE_BUTTON, TEXT_STYLE_BUTTON_HOVER } from \"./styles\";\n\nexport class Button extends Container {\n  private _text: Text = new Text(\"\", TEXT_STYLE_BUTTON);\n\n  constructor(s: string) {\n    super();\n\n    this.text = s;\n    this.addChild(this._text);\n    this._text.anchor.set(0.5);\n    this._text.position.set(0,0);\n    this.interactive = true;\n    this.cursor = \"pointer\";\n    this.on(\"mouseover\", () => {\n      //app.renderer.backgroundColor = 0x111111;\n      this._text.style = TEXT_STYLE_BUTTON_HOVER;\n    });\n    this.on(\"mouseout\", () => {\n      this._text.style = TEXT_STYLE_BUTTON ;\n    });\n  }\n\n  setAnchor(x: number, y: number) {\n    this._text.anchor.set(x, y);\n  }\n\n  set text(s: string) {\n    this._text.text = s;\n  }\n\n  multiplierResize(multiplier: number) {\n    this._text.scale.set(multiplier);\n  }\n\n}","\nexport function hue2rgb(p: number, q: number, t: number) {\n  if (t < 0) t += 1;\n  if (t > 1) t -= 1;\n  if (t < 1 / 6) return p + (q - p) * 6 * t;\n  if (t < 1 / 2) return q;\n  if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n  return p;\n}\n\nexport function hslToRgb(h: number, s: number, l: number) {\n  var r, g, b;\n\n  if (s == 0) {\n    r = g = b = l; // achromatic\n  } else {\n\n\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n\n  return r * 255 * Math.pow(256, 2) + g * 255 * 256 + b * 255;\n}\n\nexport function rgbToDecimal([r, g, b]: [number, number, number]) {\n  return Math.round(b * 255) + (Math.round(g * 255) << 8) + (Math.round(r * 255) << 16);\n}\n\nexport function decimalTorgb(color: number): [number, number, number] {\n  let r = color >> 16;\n  color -= r << 16;\n  let g = color >> 8;\n  color -= g << 8;\n  let b = color;\n\n  return [r/255,g/255,b/255];\n}\n\nexport function saturateColor(color, amt = 1) {\n  let c = decimalTorgb(color);\n  let chsv = RGBtoHSV(c);\n  chsv[1] += 0.8 * amt;\n  if(chsv[1] > 1) chsv[1] = 1; else if(chsv[1] < 0) chsv[1] = 0;\n  let chsl = HSVtoHSL(chsv);\n  chsl[2] += 0.2 * amt;\n  if(chsl[2] > 1) chsl[2] = 1; else if(chsl[2] < 0) chsl[2] = 0;\n  chsv = HSLtoHSV(chsl);\n  return rgbToDecimal(HSVtoRGB(chsv));\n}\n\nexport function RGBtoHSV([r, g, b]): [number, number, number] {\n  var max = Math.max(r, g, b), min = Math.min(r, g, b),\n      d = max - min,\n      h,\n      s = (max === 0 ? 0 : d / max),\n      v = max;\n\n  switch (max) {\n      case min: h = 0; break;\n      case r: h = (g - b) + d * (g < b ? 6: 0); h /= 6 * d; break;\n      case g: h = (b - r) + d * 2; h /= 6 * d; break;\n      case b: h = (r - g) + d * 4; h /= 6 * d; break;\n  }\n\n  return [\n      h,\n      s,\n      v\n  ];\n}\n\nexport function HSVtoRGB([h, s, v]): [number, number, number] {\n  var r, g, b, i, f, p, q, t;\n\n  i = Math.floor(h * 6);\n  f = h * 6 - i;\n  p = v * (1 - s);\n  q = v * (1 - f * s);\n  t = v * (1 - (1 - f) * s);\n  switch (i % 6) {\n      case 0: r = v, g = t, b = p; break;\n      case 1: r = q, g = v, b = p; break;\n      case 2: r = p, g = v, b = t; break;\n      case 3: r = p, g = q, b = v; break;\n      case 4: r = t, g = p, b = v; break;\n      case 5: r = v, g = p, b = q; break;\n  }\n  return [\n      r,\n      g,\n      b\n  ];\n}\n\nexport function HSVtoHSL([h, s, v]): [number, number, number] {\n  var _h = h,\n      _s = s * v,\n      _l = (2 - s) * v;\n  _s /= (_l <= 1) ? _l : 2 - _l;\n  _l /= 2;\n\n  return [\n      _h,\n      _s,\n      _l\n  ];\n}\n\nexport function HSLtoHSV([h, s, l]): [number, number, number] {\n  var _h = h,\n      _s,\n      _v;\n\n  l *= 2;\n  s *= (l <= 1) ? l : 2 - l;\n  _v = (l + s) / 2;\n  _s = (2 * s) / (l + s);\n\n  return [\n      _h,\n      _s,\n      _v\n  ];\n}","import { Instrument } from \"./types/instruments\";\nimport { rgbToDecimal } from \"./color-utils\";\n\nexport const INSTRUMENT_COLORS: {[key in Instrument]?: number} = {\n  [\"Violin\"]: 0xaa4444,\n  [\"Viola\"]: 0xaa4444,\n  [\"Cello\"]: 0xaa4444,\n  [\"Bass\"]: 0xaa4444,\n  [\"Harp\"]: 0xaa4444,\n\n  [\"Flute\"]: 0xaaaa44,\n  [\"Piccolo\"]: 0xaaaa44,\n  [\"Oboe\"]: 0xaaaa44,\n  [\"English Horn\"]: 0xaaaa44,\n  [\"Clarinet\"]: 0xaaaa44,\n  [\"Basset Horn\"]: 0xaaaa44,\n  [\"Bass Clarinet\"]: 0xaaaa44,\n  [\"Bassoon\"]: 0xaaaa44,\n  [\"Double Bassoon\"]: 0xaaaa44,\n  [\"Saxophone\"]: 0xaaaa44,\n\n  [\"French Horn\"]: 0xccee66,\n  [\"Trumpet\"]: 0xccee66,\n  [\"Cornet\"]: 0xccee66,\n  [\"Slide Trombone\"]: 0xccee66,\n  [\"Tuba\"]: 0xccee66,\n\n  [\"Timpani\"]: 0x7700ee,\n  [\"Bass Drum\"]: 0x7700ee,\n  [\"Snare Drum\"]: 0x7700ee,\n  [\"Chimes\"]: 0x7700ee,\n  [\"Cymbals\"]: 0x7700ee,\n  [\"Gong\"]: 0x7700ee,\n  [\"Triangle\"]: 0x7700ee,\n  [\"Glockenspiel\"]: 0x7700ee,\n  [\"Xylophone\"]: 0x7700ee,\n  [\"Castanets\"]: 0x7700ee,\n  [\"Tambourine\"]: 0x7700ee,\n}\n\nexport const DEFAULT_INSTRUMENT_COLOR = 0x1111ff;\n\n\nexport const COLOR_BOOKSTORE_HIGHLIGHT = rgbToDecimal(<[number,number,number]>[63,54,42].map(d => d/100));\nexport const COLOR_BOOKSTORE_A = <[number,number,number]>[63,54,41].map(d => d/100);\nexport const COLOR_BOOKSTORE_B = <[number,number,number]>[33,22,11].map(d => d/100);\n\nexport const COLOR_BUS_HIGHLIGHT = rgbToDecimal(<[number,number,number]>[62,63,61].map(d => d/100));\nexport const COLOR_BUS_A = <[number,number,number]>[62,63,61].map(d => d/100);\nexport const COLOR_BUS_B = <[number,number,number]>[21,22,19].map(d => d/100);\n\nexport const COLOR_DESERT_HIGHLIGHT = rgbToDecimal(<[number,number,number]>[60,50,42].map(d => d/100));\nexport const COLOR_DESERT_A = <[number,number,number]>[61,49,42].map(d => d/100);\nexport const COLOR_DESERT_B = <[number,number,number]>[29,20,13].map(d => d/100);\n\nexport const COLOR_FOREST_HIGHLIGHT = rgbToDecimal(<[number,number,number]>[61,60,36].map(d => d/100));\nexport const COLOR_FOREST_A = <[number,number,number]>[61,60,32].map(d => d/100);\nexport const COLOR_FOREST_B = <[number,number,number]>[16,20,12].map(d => d/100);\n\nexport const COLOR_LAKE_HIGHLIGHT = rgbToDecimal(<[number,number,number]>[49,55,59].map(d => d/100));\nexport const COLOR_LAKE_A = <[number,number,number]>[49,55,60].map(d => d/100);\nexport const COLOR_LAKE_B = <[number,number,number]>[11,15,14].map(d => d/100);\n\nexport const COLOR_MOUNTAIN_HIGHLIGHT = rgbToDecimal(<[number,number,number]>[66,62,64].map(d => d/100));\nexport const COLOR_MOUNTAIN_A = <[number,number,number]>[67,63,64].map(d => d/100);\nexport const COLOR_MOUNTAIN_B = <[number,number,number]>[28,26,29].map(d => d/100);\n\nexport const COLOR_RECAP_HIGHLIGHT = rgbToDecimal(<[number,number,number]>[0,0,100].map(d => d/100));\nexport const COLOR_RECAP_A = <[number,number,number]>[0,0,100].map(d => d/100);\nexport const COLOR_RECAP_B = <[number,number,number]>[0,100,0].map(d => d/100);\n\nexport const COLOR_HALL_HIGHLIGHT = rgbToDecimal(<[number,number,number]>[96,92,81].map(d => d/100));\nexport const COLOR_HALL_A = <[number,number,number]>[96,92,81].map(d => d/100);\nexport const COLOR_HALL_B = <[number,number,number]>[16,9,8].map(d => d/100);\n\n\n\n\n\n\n\n\n","export const WORLD_WIDTH = 2000;\nexport const WORLD_HEIGHT = 2000;\nexport const DRAGGABLE_RADIUS = 32;","// extracted by mini-css-extract-plugin","import { Graphics, Point, InteractionEvent } from \"pixi.js\";\nimport { Interactive } from \"./interactive\";\nimport { Draggable, DraggableState } from './draggable';\nimport ArrowGraphic from \"./arrow-graphic\";\n\nexport class DraggableSpawn extends Interactive {\n  protected graphics: Graphics = new Graphics();\n  protected dragging = false;\n  public origin: Point = new Point();\n  private multiplier: number = 1.0;\n  public isDragging = false;\n  public draggingObject?: Draggable;\n  protected firstArrow: ArrowGraphic;\n\n  constructor() {\n    super();\n    this.spawnDraggable();\n\n    this.sortableChildren = true;\n    this.firstArrow = new ArrowGraphic([-52, -10],[-100,-16]);\n    this.addChild(this.firstArrow);\n\n  }\n\n  spawnDraggable() {\n    if(this.draggingObject) {\n      // Just in case, let's make sure we don't have listeners on an old draggable\n      this.draggingObject.off('dragActive', this.onActiveDrag.bind(this));\n      this.draggingObject.off('dragInactive', this.onInctiveDrag.bind(this));\n      this.draggingObject.off('adopted', this.onAdopted.bind(this));\n    }\n    this.draggingObject = new Draggable();\n    this.draggingObject.visible = false;\n    this.addChild(this.draggingObject);\n    this.draggingObject.position.set(0,0);\n    //this.draggingObject.multiplierResize(this.multiplier);\n    //this.draggingObject.on('dragActive', this.onActiveDrag.bind(this));\n    //this.draggingObject.on('dragInactive', this.onInctiveDrag.bind(this));\n    this.draggingObject.on('dragged', this.onDragged.bind(this));\n    this.draggingObject.on('adopted', this.onAdopted.bind(this));\n    this.draggingObject.on('destroy', this.onDestroy.bind(this));\n  }\n\n  onDestroy(dragging: Draggable) {\n    dragging.abandon();\n  }\n\n  killArrow() {\n    if(this.firstArrow) {\n      this.firstArrow.destroy();\n      delete this.firstArrow;\n    }\n  }\n\n  onAdopted(dragging: Draggable) {\n    if(this.firstArrow) {\n      this.firstArrow.destroy();\n      delete this.firstArrow;\n      this.emit('firstDrag');\n    }\n    dragging.visible = true;\n    dragging.off('destroy', this.onDestroy.bind(this));\n    this.spawnDraggable();\n  }\n\n  onActiveDrag(dragging: Draggable, e: InteractionEvent) {\n    this.isDragging = true;\n  }\n\n  onDragged(dragging: Draggable, e: InteractionEvent) {\n    this.emit('dragged', dragging, e);\n  }\n\n  onInctiveDrag(dragging: Draggable, e: InteractionEvent) {\n    this.isDragging = false;\n    setImmediate(this.checkKill.bind(this));\n  }\n\n  checkKill() {\n    if(!this.isDragging && this.draggingObject) {\n      const distanceFromCenter = this.draggingObject.position.x * this.draggingObject.position.x + this.draggingObject.position.y * this.draggingObject.position.y;\n      if(distanceFromCenter < 100 * 100 * this.multiplier) {\n        this.draggingObject.position.set(0,0);\n      } else {\n        this.draggingObject.setState(DraggableState.SHRINK_OUT, 0.5);\n        this.spawnDraggable();\n      }\n    }\n  }\n\n  setOrigin(x: number, y: number) {\n    this.origin.x = x;\n    this.origin.y = y;\n    this.position.set(x, y);\n  }\n\n  multiplierResize(multiplier: number) {\n    this.multiplier = multiplier;\n    this.scale.set(multiplier);\n  }\n\n  onTick(beat: number, deltaBeat: number) {\n    if(this.children) {\n      this.children.forEach((maybeDraggable) => {\n        if(maybeDraggable instanceof Draggable) {\n          maybeDraggable.zIndex = maybeDraggable.position.y;\n          maybeDraggable.brightness = 1 - Math.min(1, Math.max(0, -maybeDraggable.zIndex / 200 ))\n          maybeDraggable.onTick(beat, deltaBeat);\n        }\n      });\n    }\n\n    if(this.firstArrow) {\n      let alpha = 1;\n      if(this.draggingObject) {\n        const distanceFromDest = Math.pow( - 100 - this.draggingObject.position.x, 2) + Math.pow( - 50 - this.draggingObject.position.y, 2);\n        alpha = Math.max(0, Math.min(1, distanceFromDest / 10000 ) );\n      }\n      this.firstArrow.alpha = alpha;\n      this.firstArrow.tick(deltaBeat);\n    }\n\n  }\n\n  setState(newState: DraggableState, value: number) {\n    //\n  }\n\n}","import { Graphics, Point, Sprite, BLEND_MODES, Container, DisplayObject, InteractionEvent, filters } from \"pixi.js\";\nimport { Interactive } from \"./interactive\";\nimport { DRAGGABLE_RADIUS } from \"./constants\";\nimport bloomImage from '../assets/images/bloom-128x128.png';\nimport ClickTrack from \"click-track\";\nimport OnDemandEmitter from \"./on-demand-emitter\";\nimport {COLOR_BOOKSTORE_HIGHLIGHT , COLOR_BUS_HIGHLIGHT , COLOR_DESERT_HIGHLIGHT , COLOR_FOREST_HIGHLIGHT , COLOR_LAKE_HIGHLIGHT , COLOR_MOUNTAIN_HIGHLIGHT , COLOR_RECAP_HIGHLIGHT , COLOR_HALL_HIGHLIGHT} from './colors'\nimport PerformanceState from \"./performance-state\";\nimport { decimalTorgb, rgbToDecimal, saturateColor } from \"./color-utils\";\nimport { MotionFn } from \"./tracks/main/instrument-motion-fn\";\nimport { linearLerpVec3 } from \"./lerp\";\nimport { PathParticleBetter } from \"./path-particle\";\n\nimport note_16DotDown from '../assets/images/note-notations/16-dot-down.svg';\nimport note_16DotUp from '../assets/images/note-notations/16-dot-up.svg';\nimport note_16Down from '../assets/images/note-notations/16-down.svg';\nimport note_16Up from '../assets/images/note-notations/16-up.svg';\nimport note_2DotDown from '../assets/images/note-notations/2-dot-down.svg';\nimport note_2DotTremDown from '../assets/images/note-notations/2-dot-trem-down.svg';\nimport note_2DotTremUp from '../assets/images/note-notations/2-dot-trem-up.svg';\nimport note_2DotUp from '../assets/images/note-notations/2-dot-up.svg';\nimport note_2Down from '../assets/images/note-notations/2-down.svg';\nimport note_2TremDown from '../assets/images/note-notations/2-trem-down.svg';\nimport note_2TremUp from '../assets/images/note-notations/2-trem-up.svg';\nimport note_2Up from '../assets/images/note-notations/2-up.svg';\nimport note_32Down from '../assets/images/note-notations/32-down.svg';\nimport note_32Up from '../assets/images/note-notations/32-up.svg';\nimport note_4DotDown from '../assets/images/note-notations/4-dot-down.svg';\nimport note_4DotTremDown from '../assets/images/note-notations/4-dot-trem-down.svg';\nimport note_4DotTremUp from '../assets/images/note-notations/4-dot-trem-up.svg';\nimport note_4DotUp from '../assets/images/note-notations/4-dot-up.svg';\nimport note_4Down from '../assets/images/note-notations/4-down.svg';\nimport note_4TremUp from '../assets/images/note-notations/4-trem-up.svg';\nimport note_4Up from '../assets/images/note-notations/4-up.svg';\nimport note_8DotDown from '../assets/images/note-notations/8-dot-down.svg';\nimport note_8DotUp from '../assets/images/note-notations/8-dot-up.svg';\nimport note_8Down from '../assets/images/note-notations/8-down.svg';\nimport note_8TremDown from '../assets/images/note-notations/8-trem-down.svg';\nimport note_8TremUp from '../assets/images/note-notations/8-trem-up.svg';\nimport note_8Up from '../assets/images/note-notations/8-up.svg';\n\nconst noteImages = [\n  note_32Up,\n  note_32Down,\n  note_16DotUp,\n  note_16DotDown,\n  note_16Up,\n  note_16Down,\n  note_8Up,\n  note_8Down,\n  note_8TremUp,\n  note_8TremDown,\n  note_8DotUp,\n  note_8DotDown,\n  note_4Up,\n  note_4Down,\n  note_4TremUp,\n  note_4DotUp,\n  note_4DotDown,\n  note_4DotTremUp,\n  note_4DotTremDown,\n  note_2Up,\n  note_2Down,\n  note_2TremDown,\n  note_2TremUp,\n  note_2DotUp,\n  note_2DotDown,\n  note_2DotTremUp,\n  note_2DotTremDown,\n];\n\nconst partyColors = [\n  COLOR_BOOKSTORE_HIGHLIGHT,\n  COLOR_BUS_HIGHLIGHT,\n  COLOR_DESERT_HIGHLIGHT,\n  COLOR_FOREST_HIGHLIGHT,\n  COLOR_LAKE_HIGHLIGHT,\n  COLOR_MOUNTAIN_HIGHLIGHT,\n  COLOR_HALL_HIGHLIGHT\n].map((d) => decimalTorgb(saturateColor(d, 0.5)))\n\nconst whichNoteIcon = (a: NoteAttributes): string => {\n  switch (a.duration) {\n    case 0.2708: //- (close enough) thirty second\n    case 0.25: //thirty second\n      if(a.stem && a.stem < 0) return note_32Down;\n      return note_32Up;\n    break;\n\n    case 0.2875: // (close enough) sixteenth\n    case 0.3: // (close enough) sixteenth\n    case 0.3333: // (close enough) sixteenth\n    case 0.5: //sixteenth\n      if(a.stem && a.stem < 0) return note_16Down;\n      return note_16Up;\n    break;\n\n    case 0.75: //dotted sixteenth\n      if(a.stem && a.stem < 0) return note_16DotDown;\n      return note_16DotUp;\n    break;\n\n\n    case 0.6667: // (close enough) eighth\n    case 1.0917: // (close enough) eighth\n    case 1.2: // (close enough) eighth\n    case 1: //eighth\n      if(a.isTremelo) {\n        if(a.stem && a.stem < 0) return note_8TremDown;\n        return note_8TremUp;\n      }\n      if(a.stem && a.stem < 0) return note_8Down;\n      return note_8Up;\n    break;\n\n    case 1.5: //dotted eighth\n      if(a.stem && a.stem < 0) return note_8DotDown;\n      return note_8DotUp;\n    break;\n\n    case 2: //quarter\n      if(a.isTremelo) {\n        return note_4TremUp;\n      }\n      if(a.stem && a.stem < 0) return note_4Down;\n      return note_4Up;\n    break;\n\n    case 3: //dotted quarter\n      if(a.isTremelo) {\n        if(a.stem && a.stem < 0) return note_4DotTremDown;\n        return note_4DotTremUp;\n      }\n      if(a.stem && a.stem < 0) return note_4DotDown;\n      return note_4DotUp;\n    break;\n\n    case 4: //half\n      if(a.isTremelo) {\n        if(a.stem && a.stem < 0) return note_2TremDown;\n        return note_2TremUp;\n      }\n      if(a.stem && a.stem < 0) return note_2Down;\n      return note_2Up;\n    break;\n\n    case 6: //dotted half\n      if(a.isTremelo) {\n        if(a.stem && a.stem < 0) return note_2DotTremDown;\n        return note_2DotTremUp;\n      }\n      if(a.stem && a.stem < 0) return note_2DotDown;\n      return note_2DotUp;\n    break;\n\n    default:\n      // The mose basic of all notes;\n      return note_4Up;\n  }\n};\n\n\nexport enum DraggableState {\n  HIDDEN,\n  IDLE,\n  SHRINK_OUT,\n  SHRINK_IN\n}\n\ntype NoteAttributes = {\n  pitch?: number | null;\n  words?: string;\n  duration?: number;\n  isTremelo?: boolean;\n  isCrescendo?: boolean;\n  stem?: number;\n  iconIndex?: number;\n};\n\nfunction clampVector2(vec, amt) {\n  let x2 = vec[0]*vec[0];\n  let y2 = vec[1]*vec[1];\n  if(x2 + y2 > amt) {\n    let ratio = amt/Math.sqrt(x2+y2);\n    vec[0] *= ratio;\n    vec[1] *= ratio;\n  }\n}\n\nconst generateMoveFn = ({x: spawnX, y: spawnY}, pointerPos) => {\n  let seed = 0.5 - Math.random();\n  return function (time, lastPos, delta, velocity) {\n\n    velocity[0] += (Math.sin((time + seed * 128)/30)) * delta * 4;\n\n    // Calculate attractor\n    let xdif = pointerPos.x - lastPos.x - spawnX;\n    let ydif = pointerPos.y - lastPos.y - spawnY;\n    let rat = 0;\n    if(xdif*xdif + ydif*ydif < 16384) {\n      rat = 1 - (xdif + ydif) / 16384;\n      velocity[0] += Math.sign(xdif) * delta * rat * 3;\n      velocity[1] += Math.sign(ydif) * delta * rat * 3;\n    } else if(velocity[1] < -10) {\n      velocity[1] -= 1;\n    }\n\n    clampVector2(velocity, 20);\n\n    let deltax = velocity[0] * delta;\n    let deltay = velocity[1] * delta;\n\n    return {x: lastPos.x + deltax, y: lastPos.y + deltay, a: rat};\n  }\n}\n\nexport class Draggable extends Interactive {\n  protected graphics: DisplayObject = new Graphics();\n  protected dragging = false;\n  public origin: Point = new Point();\n  protected state: DraggableState;\n  protected lastPosition: Point = new Point();\n  protected pointerPos: Point = new Point();\n  protected velocity: [number, number];\n  protected velocityMeasurements: Array<[number, number]> = [];\n  protected lastBeat: number = 0;\n  public brightness: number = 1;\n  protected visualCuesClicktrack: ClickTrack<NoteAttributes>;\n  protected visualCuesEmitter: OnDemandEmitter;\n  private bloomSprite: Sprite;\n  public motionFn: MotionFn;\n  private _colorFrom: [number, number, number] = [1,1,1];\n  private _currentColor: [number, number, number] = [1,1,1];\n  private _accentColor: [number, number, number] = [1,1,1];\n  private _color_timer: number = 0;\n  private currentNoteAttributes: NoteAttributes;\n  private currentCuedNote: number;\n  private currentCuedPhraseStartBeat: number;\n  private currentCuedPhraseDuration: number;\n  private currentCuedPhraseEndBeat: number;\n  private colorMatrix = new filters.ColorMatrixFilter();\n  private idleMotionLerp = 0;\n  private _partyTime = false;\n\n  constructor() {\n    super();\n    (this.graphics as Graphics)\n      .clear()\n      .beginFill(0xffffff, 1)\n      .drawCircle(0, 0, DRAGGABLE_RADIUS)\n      .endFill();\n    this.addChild(this.graphics);\n\n    this.bloomSprite = Sprite.from(bloomImage);\n    this.bloomSprite.scale.set(0.7);\n    this.bloomSprite.blendMode = BLEND_MODES.SOFT_LIGHT;\n    this.bloomSprite.anchor.set(0.5, 0.5);\n    this.setState(DraggableState.SHRINK_IN, 1.0);\n\n    this.addChild(this.bloomSprite);\n    window.addEventListener('mousemove', this.onPointerMove.bind(this));\n\n    this.graphics.interactive = true;\n    this.graphics.cursor = \"grab\";\n    this.graphics\n      .on('pointerdown', this.onDragStart.bind(this))\n      .on('pointerup', this.onDragEnd.bind(this))\n      .on('pointerupoutside', this.onDragEnd.bind(this));\n\n    this.filters = [this.colorMatrix];\n  }\n\n  adopt(newParent: Container) {\n    this.emit('adopted', this, newParent);\n    this.setState(DraggableState.SHRINK_IN, 0);\n    this.velocity = [0,0];\n  }\n\n  abandon() {\n    if(this.parent) {\n      this.parent.removeChild(this);\n    }\n    this.destroy();\n  }\n\n  setOrigin(x: number, y: number) {\n    this.origin.x = x;\n    this.origin.y = y;\n    this.position.set(x, y);\n  }\n\n  onDragStart(e: InteractionEvent) {\n    this.dragging = true;\n    this.graphics.cursor = \"grabbing\";\n    this.emit(\"dragActive\", this, e);\n    this.graphics.on('pointermove', this.onDragMove.bind(this));\n    document.body.classList.add(\"dragging\");\n  }\n\n  onDragEnd(e: InteractionEvent) {\n    this.dragging = false;\n    this.graphics.cursor = \"auto\";\n    this.emit(\"dragInactive\", this, e);\n    this.graphics.off('pointermove', this.onDragMove.bind(this));\n    this.emit(\"dragged\", this, e);\n    document.body.classList.remove(\"dragging\");\n  }\n\n  onPointerMove(e: MouseEvent) {\n    if (!this.dragging) {\n      this.pointerPos.x = e.clientX;\n      this.pointerPos.y = e.clientY;\n    }\n  }\n\n  onDragMove(e: InteractionEvent) {\n    if (this.dragging) {\n      const newPosition = e.data.getLocalPosition(this.parent);\n      this.pointerPos.copyFrom(newPosition);\n    }\n  }\n\n  onTick(beat: number, deltaBeat: number) {\n    super.onTick(beat, deltaBeat);\n\n    if(this._destroyed) return;\n\n    if(this.visualCuesEmitter) {\n      this.visualCuesEmitter.update(deltaBeat);\n    }\n\n    if(this.pointerPos && this.dragging) {\n      this.lastPosition.copyFrom(this.position);\n      this.position.copyFrom(this.pointerPos);\n      const velMeasurement: [number, number] = [(this.position.x - this.lastPosition.x) / deltaBeat, (this.position.y - this.lastPosition.y) / deltaBeat];\n      this.velocityMeasurements.push(velMeasurement);\n      // keep measurements to 5\n      if(this.velocityMeasurements.length > 10) {\n        this.velocityMeasurements.shift();\n      }\n      // Calculate avg velocity from samples\n      this.velocity = [0,0];\n      for (let i = 0; i < this.velocityMeasurements.length; i++) {\n        this.velocity[0] += this.velocityMeasurements[i][0];\n        this.velocity[1] += this.velocityMeasurements[i][1];\n      }\n      this.velocity[0] = this.velocity[0] / this.velocityMeasurements.length;\n      this.velocity[1] = this.velocity[1] / this.velocityMeasurements.length;\n    }\n\n    const ydiff = (this.position.y - this.origin.y);\n    const perspectivescale = Math.pow(2, ydiff / 200);\n    this.scale.set(perspectivescale, perspectivescale);\n\n    if(this.state === DraggableState.SHRINK_OUT) {\n      this.position.set(this.position.x + this.velocity[0] * deltaBeat / 2, this.position.y + this.velocity[1] * deltaBeat / 2);\n      this.graphics.scale.set(1 - this.stateFade);\n      this.alpha = 1 - this.stateFade;\n      if(this.stateFade >= 1) {\n        this.emit(\"destroy\", this);\n      }\n    }\n\n    if(this.state === DraggableState.SHRINK_IN) {\n      this.graphics.scale.set(this.stateFade);\n      this.alpha = this.stateFade;\n      if(this.stateFade >= 1) {\n        this.setState(DraggableState.IDLE, 1.0);\n      }\n    }\n\n    if(this.visualCuesClicktrack && this.currentNoteAttributes && this.motionFn) {\n      if(this.idleMotionLerp < 1) {\n        this.idleMotionLerp += deltaBeat / 4;\n      } else if(this.idleMotionLerp > 1) {\n        this.idleMotionLerp = 1;\n      }\n\n      const currentNoteOptions = {\n        beat: this.visualCuesClicktrack.beat,\n        noteProgress: Math.max(0, beat - this.currentCuedNote),\n        noteDuration: this.currentNoteAttributes.duration ? this.currentNoteAttributes.duration : 0,\n        phraseProgress: this.visualCuesClicktrack.beat - this.currentCuedPhraseStartBeat,\n        phraseDuration: this.currentCuedPhraseDuration,\n        pitch: this.currentNoteAttributes.pitch,\n        isTremelo: this.currentNoteAttributes.isTremelo,\n        isCrescendo: this.currentNoteAttributes.isCrescendo\n      };\n      if(this.idleMotionLerp < 1 && this.motionFn.lerpFromIdle) {\n\n        // EaseInOutQuad\n        let t = this.idleMotionLerp;\n        if (t < 0.5) {\n          t = 2*t*t;\n        } else {\n          t = -1+4*t-2*t*t\n        }\n\n        if(this.motionFn.x)\n          this.graphics.position.x = this.motionFn.x(currentNoteOptions)*t;\n        if(this.motionFn.y)\n          this.graphics.position.y = this.motionFn.y(currentNoteOptions)*t;\n        if(this.motionFn.t)\n          this.graphics.rotation = this.motionFn.t(currentNoteOptions)*t;\n      } else {\n        if(this.motionFn.x)\n          this.graphics.position.x = this.motionFn.x(currentNoteOptions);\n        if(this.motionFn.y)\n          this.graphics.position.y = this.motionFn.y(currentNoteOptions);\n        if(this.motionFn.t)\n          this.graphics.rotation = this.motionFn.t(currentNoteOptions);\n      }\n    }\n\n    if(this.visualCuesClicktrack) {\n      if(this._color_timer > 0) {\n        this._color_timer -= deltaBeat / 10;\n        if(this._color_timer <= 0) this._color_timer = 0;\n        this._currentColor = linearLerpVec3(this._colorFrom, this._accentColor, 1 - this._color_timer);\n\n        let amt = (0.8-this.brightness) * (50/255);\n        this._currentColor[0] -= amt;\n        this._currentColor[1] -= amt;\n        this._currentColor[2] -= amt;\n        if(this._currentColor[0] > 255) this._currentColor[0] = 255; else if(this._currentColor[0] < 0) this._currentColor[0] = 0;\n        if(this._currentColor[1] > 255) this._currentColor[1] = 255; else if(this._currentColor[1] < 0) this._currentColor[1] = 0;\n        if(this._currentColor[2] > 255) this._currentColor[2] = 255; else if(this._currentColor[2] < 0) this._currentColor[2] = 0;\n\n        this.colorMatrix.matrix = [\n          this._currentColor[0],0,0,0,0,\n          0,this._currentColor[1],0,0,0,\n          0,0,this._currentColor[2],0,0,\n          0,0,0,1,0,\n        ];\n      }\n      if (beat > this.currentCuedPhraseEndBeat) {\n        if(this.currentCuedPhraseEndBeat > 118*6) {\n          // This is the final measure, hang out for a bit\n        } else {\n          this.visualCuesClicktrack.deconstruct();\n          delete this.visualCuesClicktrack;\n          this.setState(DraggableState.SHRINK_OUT, 0.1);\n        }\n      }\n    }\n  }\n\n  set accentColor(color: [number, number, number]) {\n    this._colorFrom = this._currentColor;\n    this._accentColor = color;\n    this._color_timer = 1;\n  }\n\n  get accentColor(): [number, number, number] {\n    return this._accentColor;\n  }\n\n  set icon(icon: string) {\n    this.graphics.destroy();\n    this.graphics = Sprite.from(icon);\n    (<Sprite>this.graphics).anchor.set(0.5);\n    this.addChild(this.graphics);\n\n    const scale = 1;\n    this.graphics.scale.set(scale);\n    this.bloomSprite.visible = false;\n  }\n\n  setVisualCues(cues: [number, NoteAttributes][], parentClick?: ClickTrack) {\n\n    if(this.visualCuesClicktrack) {\n      throw new Error(\"Can't set the visual cues again\");\n    }\n\n    const cuesB = cues.map<[number, NoteAttributes]>((a) => {\n      return [a[0],\n        {\n          ...a[1],\n          iconIndex: noteImages.indexOf(whichNoteIcon(a[1]))\n        }\n      ]\n    });\n\n    // Dirty way for testing until better decoupled\n    if(parentClick) {\n      this.visualCuesClicktrack = new ClickTrack<NoteAttributes>({\n        timerSource: parentClick.timer,\n        offset: parentClick.offset,\n        tempo: parentClick.tempo,\n        cues: cuesB\n      });\n    } else {\n      this.visualCuesClicktrack = new ClickTrack<NoteAttributes>({\n        timerSource: PerformanceState.clickTrack.timer,\n        offset: PerformanceState.clickTrack.offset,\n        tempo: PerformanceState.clickTrack.tempo,\n        cues: cuesB\n      });\n    }\n\n    this.currentCuedPhraseStartBeat = cues[0][0];\n    this.currentCuedPhraseEndBeat = cues[cues.length - 1][0] + (cues[cues.length - 1][1].duration || 0);\n    this.currentCuedPhraseDuration = this.currentCuedPhraseEndBeat - this.currentCuedPhraseStartBeat;\n\n    const spawnSpread = 5;\n    const color = \"#\" + rgbToDecimal([Math.random(),Math.random(),Math.random()]).toString(16).padStart(6,\"0\");\n\n    // This config is temp, need to move to setter\n    this.visualCuesEmitter = new OnDemandEmitter(\n      this,\n      noteImages, {\n        \"alpha\": {\n          list: [\n            {\n              time: 0,\n              value: 0\n            },\n            {\n              time: 0.2,\n              value: 0.7\n            },\n            {\n              time: 0.8,\n              value: 0.4\n            },\n            {\n              time: 1,\n              value: 0\n            }\n          ],\n          isStepped: false\n        },\n        \"scale\": {\n          \"start\": 0.6,\n          \"end\": 0.6,\n          \"minimumScaleMultiplier\": 0.5\n        },\n        \"color\": {\n          list: [\n            {\n              time: 0,\n              value: \"#ffffff\",\n            },\n            {\n              time: 0.2,\n              value: \"#dddddd\",\n            },\n            {\n              time: 0.4,\n              value: \"#ffffff\",\n            },\n            {\n              time: 0.6,\n              value: \"#dddddd\",\n            },\n            {\n              time: 0.8,\n              value: \"#ffffff\",\n            },\n            {\n              time: 1.0,\n              value: \"#dddddd\",\n            },\n          ],\n          isStepped: false\n        },\n        \"speed\": {\n          \"start\": 12,\n          \"end\": 5,\n          \"minimumSpeedMultiplier\": 1\n        },\n        \"acceleration\": {\n          \"x\": 0,\n          \"y\": 0\n        },\n        \"maxSpeed\": 0,\n        \"startRotation\": {\n          \"min\": -90-spawnSpread,\n          \"max\": -90-spawnSpread\n        },\n        \"noRotation\": true,\n        \"rotationSpeed\": {\n          \"min\": 0,\n          \"max\": 0\n        },\n        \"lifetime\": {\n          \"min\": 24,\n          \"max\": 24\n        },\n        \"blendMode\": \"screen\",\n        \"extraData\": {\n          \"path\": generateMoveFn(this.getGlobalPosition(), this.pointerPos)\n        },\n        \"frequency\": 0.01,\n        \"particlesPerWave\": 1,\n        \"emitterLifetime\": -1,\n        \"maxParticles\": 15,\n        \"pos\": {\n          \"x\": 0,\n          \"y\": 0\n        },\n        \"addAtBack\": false,\n        \"spawnType\": \"ring\",\n        \"spawnCircle\": {\n          \"x\": 0,\n          \"y\": 0,\n          \"r\": 48,\n          \"minR\": 48\n        }\n      }\n    );\n\n    this.visualCuesEmitter.particleConstructor = PathParticleBetter;\n\n    if(this._partyTime) {\n      this.visualCuesClicktrack.on(\"beat\", this.partyBeat.bind(this));\n    }\n    this.visualCuesClicktrack.on(\"cue\", (ct, e) => {\n      if(e.data) {\n        this.currentCuedNote = e.beat;\n        this.currentNoteAttributes = {...e.data};\n        if(e.data.duration) {\n          this.visualCuesEmitter.spawn(1, e.drag, e.data.iconIndex);\n        }\n      }\n    });\n\n  }\n\n  partyBeat(ct, e) {\n    if(Math.floor(ct.beat) % 3 === 0) {\n      if(this._partyTime && this._color_timer == 0) {\n        this.accentColor = partyColors[(Math.floor(ct.beat) / 3) % partyColors.length];\n      }\n    }\n  }\n\n  partyTime() {\n    this._partyTime = true;\n    if(this.visualCuesClicktrack) {\n      this.visualCuesClicktrack.on(\"beat\", this.partyBeat.bind(this));\n    }\n  }\n\n  multiplierResize(m: number) {}\n\n  setState(newState: DraggableState, value: number) {\n    if(newState === DraggableState.SHRINK_OUT) {\n      this.stateFadeTime = value;\n      this.stateFade = 1 - this.graphics.scale.x;\n    }\n    if(newState === DraggableState.SHRINK_IN) {\n      this.stateFadeTime = 0.5;\n      this.stateFade = 1 - this.graphics.scale.x;\n    }\n    this.state = newState;\n  }\n\n}","import { Container, Sprite } from \"pixi.js\";\n\nexport default class EnvironmentLayer extends Container {\n  private sprites: [Sprite,Sprite][];\n  private currentSprite?: [Sprite, Sprite];\n  private lastSpriteIndex = -1;\n  private tweeningFn?: CallableFunction;\n  private transitionComplete?: CallableFunction;\n  private currentSpriteIndex = -1;\n  private multiplier: number = 1;\n  private transitionNum: number = 0;\n  constructor(images: [string,string][], private lockEdgesToStage = false) {\n    super();\n    this.sprites = images.map(([left, right]) => {\n      const leftSprite = Sprite.from(left);\n      const rightSprite = Sprite.from(right);\n      leftSprite.anchor.set(0,1);\n      rightSprite.anchor.set(1,1);\n      return [leftSprite,rightSprite]\n    });\n  }\n\n  set activeSprite(index: number) {\n\n    this.lastSpriteIndex = this.currentSpriteIndex;\n    this.currentSpriteIndex = index;\n\n    if(this.currentSprite && index < 0) {\n      this.fadeOut(0.5).then(() => {\n        if(this.currentSprite) {\n          this.removeChild(this.currentSprite[0]);\n          this.removeChild(this.currentSprite[1]);\n          delete this.currentSprite;\n        }\n      });\n    } else {\n\n      if(this.currentSprite) {\n        this.removeChild(this.currentSprite[0]);\n        this.removeChild(this.currentSprite[1]);\n        delete this.currentSprite;\n      }\n\n      if(index >= 0 && this.sprites[index]) {\n        this.currentSprite = this.sprites[index];\n        this.addChild(this.sprites[index][0]);\n        this.addChild(this.sprites[index][1]);\n        this.multiplierResize(this.multiplier);\n        this.fadeIn(2);\n      }\n    }\n  }\n\n  async fadeOut(transitionNum) {\n    this.transitionNum = transitionNum;\n    return new Promise((r) => {\n      this.tweeningFn = (t) => {\n        if(this.currentSprite) {\n          this.currentSprite[0].alpha = t/transitionNum;\n          this.currentSprite[1].alpha = t/transitionNum;\n        }\n      };\n      this.transitionComplete = r;\n    });\n  }\n\n  async fadeIn(maxNum) {\n    this.transitionNum = maxNum;\n    return new Promise((r) => {\n      this.tweeningFn = (t) => {\n        const tt = t/maxNum;\n        if(this.currentSprite) {\n          this.currentSprite[0].alpha = Math.min(1, Math.max(0,2*(1-tt)));\n          this.currentSprite[1].alpha = Math.min(1, Math.max(0,2*(1-tt)));\n\n          if(!this.lockEdgesToStage) {\n            let it = 1-tt;\n            let slideScale = 0.1;\n            this.currentSprite[0].anchor.set(slideScale*(it*(it-2)+1),1); // 1 to 0\n            this.currentSprite[1].anchor.set((1-slideScale) + slideScale*(-it*(it-2)),1); // 0 to 1\n          }\n        }\n      };\n      this.transitionComplete = r;\n    });\n  }\n  onTick(deltaMs: number) {\n    if(this.transitionNum > 0) {\n      this.transitionNum -= deltaMs / 100;\n      if(this.tweeningFn) this.tweeningFn(Math.max(0, this.transitionNum));\n      if(this.transitionNum <= 0) {\n        this.transitionNum = 0;\n        if(this.transitionComplete) {\n          this.transitionComplete();\n          this.transitionComplete = undefined;\n          this.tweeningFn = undefined;\n        }\n      }\n    }\n\n  }\n\n  multiplierResize(multiplier: number) {\n    this.multiplier = multiplier;\n\n    if(!this.currentSprite) {\n      return;\n    }\n\n    const w = window.innerWidth;\n    const h = window.innerHeight;\n\n    if(this.lockEdgesToStage) {\n      this.currentSprite[0].position.set(window.innerWidth/2 - multiplier * 450, 0);\n      this.currentSprite[1].position.set(window.innerWidth/2 + multiplier * 450, 0);\n    } else {\n      this.currentSprite[0].position.set(0, 0);\n      this.currentSprite[1].position.set(window.innerWidth, 0);\n    }\n\n    this.currentSprite[0].scale.set(multiplier);\n    this.currentSprite[1].scale.set(multiplier);\n\n  }\n\n  draw() {\n\n  }\n}","import { Graphics, Filter } from \"pixi.js\";\nimport { COLOR_BOOKSTORE_A, COLOR_BOOKSTORE_B, COLOR_BUS_A, COLOR_BUS_B, COLOR_DESERT_A, COLOR_DESERT_B, COLOR_FOREST_A, COLOR_FOREST_B, COLOR_LAKE_A, COLOR_LAKE_B, COLOR_MOUNTAIN_A, COLOR_MOUNTAIN_B, COLOR_RECAP_A, COLOR_RECAP_B, COLOR_HALL_A, COLOR_HALL_B } from \"./colors\";\n\nexport default class GradientBackdrop extends Graphics {\n  private needDraw: boolean = true;\n  private _fromColorA: [number,number,number] = [0,0,0];\n  private _fromColorB: [number,number,number] = [0,0,0];\n  private _colorA: [number,number,number] = [0,0,0];\n  private _colorB: [number,number,number] = [0,0,0];\n  private _colorATimer: number = 0;\n  private _colorBTimer: number = 0;\n\n  protected maxHeight: number = 256;\n  public transitionSpeed = 50;\n\n  constructor() {\n    super();\n    this.draw();\n\n    this.filters = [\n      new Filter(undefined, `\n        uniform float maxXCoord;\n        uniform float startXCoord;\n        uniform float maxYCoord;\n        uniform float startYCoord;\n        uniform float edgeFallOff;\n        uniform vec3 colorA;\n        uniform vec3 colorB;\n        void main() {\n          float fallOffLeft = max(0.0, min(1.0, (gl_FragCoord.x - startXCoord) / edgeFallOff));\n          float fallOffRight = max(0.0, min(1.0, (maxXCoord - gl_FragCoord.x) / edgeFallOff));\n          float fallOffBottom = 1.0; // No need\n          float fallOffTop = max(0.0, min(1.0, (gl_FragCoord.y - startYCoord) / edgeFallOff));\n          float fallOff = min(min(min(fallOffLeft, fallOffRight), fallOffBottom), fallOffTop);\n\n          float colorScale = ((gl_FragCoord.y - startYCoord)/(maxYCoord - startYCoord));\n          gl_FragColor.rgb = mix(colorA, colorB, min(1.0,max(0.0, colorScale))) * fallOff;\n        }\n      `, {\n        colorA: this._colorA,\n        colorB: this._colorB,\n        edgeFallOff: 5.0 * window.devicePixelRatio,\n        startYCoord: 0,\n        maxYCoord: window.innerHeight,\n        maxXCoord: window.innerWidth,\n        startXCoord: 0,\n      })\n    ];\n  }\n\n  set biomeTheme(theme: string) {\n    switch (theme) {\n      case \"bookstore\":\n        this.colorA = COLOR_BOOKSTORE_A;\n        this.colorB = COLOR_BOOKSTORE_B;\n        break;\n\n      case \"bus\":\n        this.colorA = COLOR_BUS_A;\n        this.colorB = COLOR_BUS_B;\n        break;\n\n      case \"desert\":\n        this.colorA = COLOR_DESERT_A;\n        this.colorB = COLOR_DESERT_B;\n        break;\n\n      case \"forest\":\n        this.colorA = COLOR_FOREST_A;\n        this.colorB = COLOR_FOREST_B;\n        break;\n\n      case \"lake\":\n        this.colorA = COLOR_LAKE_A;\n        this.colorB = COLOR_LAKE_B;\n        break;\n\n      case \"mountain\":\n        this.colorA = COLOR_MOUNTAIN_A;\n        this.colorB = COLOR_MOUNTAIN_B;\n        break;\n\n      case \"recap\":\n        this.colorA = COLOR_RECAP_A;\n        this.colorB = COLOR_RECAP_B;\n        break;\n\n      case \"hall\":\n      default:\n        this.colorA = COLOR_HALL_A;\n        this.colorB = COLOR_HALL_B;\n        break;\n    }\n  }\n\n  set colorA(color: [number, number, number]) {\n    this._colorA = color;\n    this._fromColorA = <[number, number, number]>[...this.filters[0].uniforms.colorA];\n    this._colorATimer = this.transitionSpeed;\n  }\n\n  set colorB(color: [number, number, number]) {\n    this._colorB = color;\n    this._fromColorB = <[number, number, number]>[...this.filters[0].uniforms.colorB];\n    this._colorBTimer = this.transitionSpeed;\n  }\n\n  onTick(deltaMs: number) {\n    if(this._colorATimer > 0) {\n      this._colorATimer -= deltaMs;\n      if(this._colorATimer < 0) this._colorATimer = 0;\n      const l = 1 - Math.min(1, Math.max( 0, this._colorATimer / this.transitionSpeed ));\n      const lerpColor = this._fromColorA.map((c,i) => c + (this._colorA[i] - c) * l);\n      this.filters[0].uniforms.colorA = lerpColor;\n    }\n    if(this._colorBTimer > 0) {\n      this._colorBTimer -= deltaMs;\n      if(this._colorBTimer < 0) this._colorBTimer = 0;\n      const l = 1 - Math.min(1, Math.max( 0, this._colorBTimer / this.transitionSpeed ));\n      const lerpColor = this._fromColorB.map((c,i) => c + (this._colorB[i] - c) * l);\n      this.filters[0].uniforms.colorB = lerpColor;\n    }\n    if(this.needDraw) {\n      this.draw();\n    }\n  }\n\n  multiplierResize(multiplier: number) {\n    const w = window.innerWidth;\n    const h = window.innerHeight;\n    this.scale.set(window.innerWidth - 2, h / this.maxHeight);\n    this.position.set(0, 0);\n\n    const bounds = this.getBounds();\n\n    this.filters[0].uniforms.startYCoord = 0;\n    this.filters[0].uniforms.maxYCoord = (bounds.height - 300 * multiplier) * window.devicePixelRatio;\n\n    this.filters[0].uniforms.startXCoord = 0;//bounds.x * window.devicePixelRatio;\n    this.filters[0].uniforms.maxXCoord = window.innerWidth * window.devicePixelRatio; //(bounds.x + bounds.width) * window.devicePixelRatio;\n    this.filters[0].uniforms.edgeFallOff = multiplier * 5 * window.devicePixelRatio;\n  }\n\n  draw() {\n    this.clear()\n      .beginFill(0xffffff)\n      .drawRect(0, 0, 1, 256)\n      .endFill();\n\n    this.needDraw = false;\n  }\n}","import { Graphics, Point, InteractionEvent, BLEND_MODES } from \"pixi.js\";\nimport { Interactive } from \"./interactive\";\nimport { Draggable, DraggableState } from \"./draggable\";\nimport { powLerpPoint } from \"./lerp\";\nimport { DRAGGABLE_RADIUS } from \"./constants\";\nimport { MotionFn } from \"./tracks/main/instrument-motion-fn\";\nimport { decimalTorgb, saturateColor } from \"./color-utils\";\nimport { COLOR_HALL_HIGHLIGHT } from \"./colors\";\n\nexport enum InstrumentState {\n  IDLE,\n  CUE_READY,\n  CUED,\n  HIT,\n  HIT_SUCCESS,\n}\n\nexport class InteractiveInstrument extends Interactive {\n  private bkgGraphics: Graphics = new Graphics();\n  private indicatorPoint: Point = new Point();\n  private indicatorStartPoint: Point = new Point();\n  private indicatorEndPoint: Point = new Point();\n  private draggables: Array<Draggable> = [];\n  private mCenterPoint: Point = new Point();\n  private needDraw = true;\n  private currentColor: number = 0x000000;\n  private _highlightColor: number = COLOR_HALL_HIGHLIGHT;\n  private _outlineThickness: number = 0;\n  private _partyTime = false;\n\n  public state: InstrumentState = InstrumentState.IDLE;\n  public stateValue?: any = 0;\n  private nextCueData?: {\n    spriteUrl: string,\n    motionFn: MotionFn\n  };\n\n  constructor(private idleColor: number, private graphicsDraw: () => void) {\n    super();\n\n    this.color = idleColor;\n\n    this.draw();\n\n    this.interactive = true;\n    this.cursor = \"auto\";\n    this.on(\"drop\", this.onDrop.bind(this));\n    this.on(\"mousedragover\", this.onDragOver.bind(this));\n    this.on(\"pointertap\", this.maybeSpawn.bind(this));\n\n    this.addChild(this.bkgGraphics);\n  }\n\n  set blendBkg(y: boolean) {\n    if(y) {\n      this.bkgGraphics.blendMode = BLEND_MODES.MULTIPLY;\n      this.bkgGraphics.alpha = 0.8;\n    } else {\n      this.bkgGraphics.blendMode = BLEND_MODES.NORMAL;\n      this.bkgGraphics.alpha = 1;\n    }\n  }\n\n  set highlightColor(c: number) {\n    this._highlightColor = c;\n    if(this.state == InstrumentState.CUE_READY) {\n      this.color = this._highlightColor;\n      this.needDraw = true;\n    }\n  }\n\n  set color(c: number) {\n    if(this.currentColor !== c) {\n      this.currentColor = c;\n      this.needDraw = true;\n    }\n  }\n\n  set outlineThickness(t: number) {\n    if(this._outlineThickness !== t) {\n      this._outlineThickness = t;\n      this.needDraw = true;\n    }\n  }\n\n  multiplierResize(multiplier: number) {\n    this.scale.set(multiplier,multiplier);\n\n    const bkgBounds = this.bkgGraphics.getLocalBounds();\n    this.mCenterPoint.set(bkgBounds.x + bkgBounds.width / 2, bkgBounds.y + bkgBounds.height / 2  - DRAGGABLE_RADIUS);\n  }\n\n  maybeSpawn(e: InteractionEvent) {\n    if(this.state === InstrumentState.CUE_READY) {\n      this.emit(\"maybeSpawn\", this, e);\n    }\n  }\n\n  onDragOver(e: InteractionEvent) {\n    super.onDragOver(e);\n    const dragging = <Draggable>arguments[1];\n    if(dragging && this.state === InstrumentState.CUE_READY) {\n      dragging.onDragEnd.call(dragging, e);\n    }\n  }\n\n  onDrop(dragging: Draggable, e?: InteractionEvent) {\n    if(this.state === InstrumentState.CUE_READY && !this.draggables.length) {\n      const thisGlobPosition = this.getGlobalPosition();\n      const dragParentGlobal = dragging.parent.getGlobalPosition();\n      const dragParentOffset = new Point((dragParentGlobal.x - thisGlobPosition.x) / this.scale.x, (dragParentGlobal.y - thisGlobPosition.y) / this.scale.y);\n      dragging.adopt(this);\n      if(this._partyTime) {\n        dragging.partyTime();\n      }\n      this.draggables.push(dragging);\n      dragging.on(\"destroy\", () => {\n        const f = this.draggables.findIndex((d) => d === dragging);\n        this.draggables.splice(f, 1);\n        dragging.abandon();\n      });\n      this.setState(InstrumentState.CUED);\n      this.indicatorStartPoint.copyFrom(dragging.position);\n\n      this.indicatorEndPoint.x = this.mCenterPoint.x - dragParentOffset.x;\n      this.indicatorEndPoint.y = this.mCenterPoint.y - dragParentOffset.y;\n    }\n  }\n\n  setState(newState: InstrumentState, value?: any, cue?: number) {\n    if(newState === this.state) return;\n\n    switch (newState) {\n      case InstrumentState.CUED:\n        this.stateFadeTime = 1.0;\n        this.cursor = \"auto\";\n        //this.color = this.idleColor;\n        this.outlineThickness = 4;\n        if(this.nextCueData && this.draggables.length) {\n          this.draggables[0].icon = this.nextCueData.spriteUrl;\n          this.draggables[0].motionFn = this.nextCueData.motionFn;\n        }\n        break;\n\n      case InstrumentState.CUE_READY:\n        this.stateFadeTime = 1.0;\n        this.cursor = \"pointer\";\n        this.color = this._highlightColor;\n        this.outlineThickness = 0;\n        if(typeof value === 'object') {\n          this.nextCueData = value;\n        }\n        break;\n\n      case InstrumentState.HIT:\n        this.stateFadeTime = 0.5;\n        this.cursor = \"auto\";\n        //this.color = this.idleColor;\n        this.outlineThickness = 0;\n        if(this.state === InstrumentState.CUED){\n          newState = InstrumentState.HIT_SUCCESS;\n          this.emit(\"score\", cue);\n          this.stateFadeTime = 0.1;\n        }\n        if(this.draggables.length) {\n          if(value && typeof value === \"object\" && value.length) {\n            this.draggables[0].setVisualCues(value);\n            this.draggables[0].accentColor = decimalTorgb(this._highlightColor);\n          } else {\n            this.draggables[0].setState(DraggableState.SHRINK_OUT, 0.5);\n          }\n        }\n        break;\n\n      default:\n        //this.color = this.idleColor;\n        this.cursor = \"auto\";\n        this.outlineThickness = 0;\n        this.stateFadeTime = 1;\n    }\n    this.stateFade = 0;\n    this.state = newState;\n    this.stateValue = value;\n  }\n\n  partyTime() {\n    this._partyTime = true;\n    this.draggables.forEach((d) => d.partyTime());\n  }\n\n  onTick(currentBeat: number, deltaBeat: number) {\n    super.onTick(currentBeat, deltaBeat);\n\n    this.draggables.forEach((d) => d.onTick(currentBeat, deltaBeat));\n\n    if(this.state === InstrumentState.CUE_READY) {\n      if(this.stateFade >= 1) {\n        this.alpha = 1;\n      } else {\n        this.alpha = this.stateFade;\n      }\n    }\n\n    if(this.state === InstrumentState.CUE_READY && this.dragHover) {\n      this.outlineThickness = 2;\n    } else if(this.state === InstrumentState.CUE_READY) {\n      this.outlineThickness = 0;\n    }\n\n    if(this.state === InstrumentState.HIT || this.state === InstrumentState.HIT_SUCCESS) {\n      if(this.draggables.length) {\n        this.draggables.forEach(d => d.position.copyFrom(this.indicatorPoint));\n      }\n      if(this.stateFade >= 1) {\n        this.alpha = 0;\n        this.setState(InstrumentState.IDLE);\n      } else {\n        this.alpha = 1 - this.stateFade;\n      }\n    }\n\n    if(this.state === InstrumentState.CUED) {\n      if(this.stateFade < 1) {\n        this.indicatorPoint.copyFrom(powLerpPoint(this.indicatorStartPoint, this.indicatorEndPoint, this.stateFade, 0.1));\n      } else {\n        this.indicatorPoint.copyFrom(this.indicatorEndPoint);\n      }\n      if(this.draggables.length) {\n        this.draggables.forEach(d => d.position.copyFrom(this.indicatorPoint));\n      }\n      //this.indicatorGraphics.position.set(this.mCenterPoint.x + this.indicatorPoint.x, this.mCenterPoint.y + this.indicatorPoint.y);\n    } else if (this.state === InstrumentState.HIT_SUCCESS) {\n      //\n    } else {\n      //\n    }\n\n    if(this.state === InstrumentState.IDLE) {\n      if(this.stateFade >= 1) {\n        this.alpha = 1 - this.stateFade;\n      } else {\n        this.alpha = 0;\n      }\n    }\n\n    if(this.needDraw) {\n      this.draw();\n    }\n  }\n\n\n  draw() {\n    this.needDraw = false;\n    let c2 = saturateColor(this.currentColor);\n    this.bkgGraphics.clear().beginFill(c2, 1);\n    this.graphicsDraw.apply(this.bkgGraphics);\n    this.bkgGraphics.endFill();\n  }\n}","import { Container, InteractionEvent } from \"pixi.js\";\n\nexport abstract class Interactive extends Container {\n  // beat, state, value\n  cues: Array<[number, number, number]> = [];\n  name: string = \"\";\n  protected stateFade = 0;\n  protected stateFadeTime = 1;\n  protected dragHover: boolean = false;\n  abstract multiplierResize(multiplier: number): void;\n  abstract setState(newState: number, value: number, cue: number): void;\n  protected currentBeat: number;\n\n  onCue(cue: number, state: number, value: number) {\n    this.setState(state, value, cue);\n  }\n\n  onDragOver(e: InteractionEvent) {\n    this.dragHover = true;\n  }\n\n  onDragOut(e: InteractionEvent) {\n    this.dragHover = false;\n  }\n\n  onTick(currentBeat: number, deltaBeat: number) {\n    this.currentBeat = currentBeat;\n    if(this.stateFade < 1) {\n      this.stateFade += this.stateFadeTime * deltaBeat;\n      if(this.stateFade > 1) {\n        this.stateFade = 1;\n      }\n    }\n  }\n\n  constructor() {\n    super();\n  }\n\n}","import { Point } from \"pixi.js\";\n\nexport function linearLerp(from: number, to: number, t: number): number {\n  return from + (to - from) * t;\n}\n\nexport function linearLerpVec3(from: [number,number,number], to: [number,number,number], t: number): [number,number,number] {\n  return [linearLerp(from[0], to[0], t),linearLerp(from[1], to[1], t),linearLerp(from[2], to[2], t)];\n}\n\nexport function linearLerpPoint(from: Point, to: Point, t: number): Point {\n  return new Point(from.x + (to.x - from.x) * t, from.y + (to.y - from.y) * t);\n}\n\nexport function powLerp(from: number, to: number, t: number, pow: number): number {\n  const t2 = Math.pow(t, pow);\n  return from + (to - from) * t2;\n}\n\nexport function powLerpPoint(from: Point, to: Point, t: number, pow: number): Point {\n  const t2 = Math.pow(t, pow);\n  return new Point(from.x + (to.x - from.x) * t2, from.y + (to.y - from.y) * t2);\n}","import './css/styles.css';\nimport { Application } from 'pixi.js';\nimport { loadFonts } from './styles';\nimport { StateMachine } from './state-machine';\nimport navLinks from './nav-links.json';\n\nwindow.onload = async () => {\n\n  await Promise.all([\n    loadFonts(),\n  ]);\n\n  const app = new Application({\n    antialias: true,\n    transparent: false,\n    autoDensity: true,\n    resolution: window.devicePixelRatio || 1,\n    resizeTo: window,\n    backgroundColor: 0x000000,\n  });\n\n  const resizeCanvas = () => {\n    app.renderer.resolution = window.devicePixelRatio;\n    app.resize();\n  }\n  // Change resolution if changes\n  window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`)\n    .addEventListener(\"change\", resizeCanvas);\n  window.addEventListener(\"orientationchange\", resizeCanvas);\n\n  document.body.appendChild(app.view);\n\n  const footer = document.createElement('nav');\n  const links = Object.entries(navLinks).map(([label, url]) => {\n    const a = document.createElement('a');\n    a.setAttribute('href', url);\n    a.setAttribute('title', url.replace(/^.*:\\/\\//,'').replace(/^mailto:/,''));\n    a.innerText = label;\n    return a;\n  });\n  links.forEach((link) => footer.appendChild(link));\n  document.body.appendChild(footer);\n\n  const stateManager = new StateMachine(app);\n\n};","import { Emitter, Particle, ParticleUtils } from \"pixi-particles\"\nimport { settings, Point } from \"pixi.js\";\n\nconst helperPoint = new Point();\nexport default class OnDemandEmitter extends Emitter {\n  constructor(...args: any) {\n    // @ts-ignore\n    super(...args);\n  }\n\n  update(delta: number) {\n    if (this._autoUpdate) {\n      delta = delta / settings.TARGET_FPMS / 1000;\n    }\n\n    //if we don't have a parent to add particles to, then don't do anything.\n    //this also works as a isDestroyed check\n    if (!this._parent) return;\n    //update existing particles\n    let particle, next;\n    for (particle = this._activeParticlesFirst; particle; particle = next) {\n      next = particle.next;\n      particle.update(delta);\n    }\n\n\n    if (this._emit) {\n      //determine if the emitter should stop spawning\n      if (this._emitterLife > 0) {\n        this._emitterLife -= delta;\n        if (this._emitterLife <= 0) {\n          this._emitterLife = 0;\n          this.emit = false;\n        }\n      }\n    }\n\n    if (this._posChanged) {\n      //store current position of the emitter as local variables\n      this._prevEmitterPos.x = this.ownerPos.x + this.spawnPos.x;\n      this._prevEmitterPos.y = this.ownerPos.y + this.spawnPos.y;\n      this._prevPosIsValid = true;\n      this._posChanged = false;\n    }\n\n    //if we are all done and should destroy ourselves, take care of that\n    if (!this._emit && !this._activeParticlesFirst) {\n      if (this._completeCallback) {\n        const cb = this._completeCallback;\n        // @ts-ignore: inherited pixi library does not use strict null check\n        this._completeCallback = null;\n        cb();\n      }\n      if (this._destroyWhenComplete) {\n        this.destroy();\n      }\n    }\n  }\n\n  spawn(amount:number = 1, timePassed:number = 0, whichArt:number = -1) {\n\n    if (!this._emit) {\n      return;\n    }\n\n    // determine if we have hit the particle limit\n    if (this.particleCount >= this.maxParticles) {\n      // Let's kill the oldest to make room for the newest\n      // @TODO when amount > 1, maybe kill more?\n      this._activeParticlesFirst.kill();\n    }\n\n    //determine the particle lifetime\n    let lifetime;\n    if (this.minLifetime == this.maxLifetime) {\n      lifetime = this.minLifetime;\n    } else {\n      lifetime = Math.random() * (this.maxLifetime - this.minLifetime) + this.minLifetime;\n    }\n\n    //only make the particle if it wouldn't immediately destroy itself\n    if (timePassed < lifetime) {\n      //create enough particles (amount or up to max)\n      let i = 0;\n      for (let len = Math.min(amount, this.maxParticles - this.particleCount); i < len; ++i) {\n        //see if we actually spawn one\n        if (this.spawnChance < 1 && Math.random() >= this.spawnChance)\n          continue;\n        //create particle\n        let p;\n        if (this._poolFirst) {\n          p = this._poolFirst;\n          this._poolFirst = this._poolFirst.next;\n          // @ts-ignore: inherited pixi library does not use strict null check\n          p.next = null;\n        } else {\n          p = new this.particleConstructor(this);\n        }\n\n        //set a random texture if we have more than one\n        if (this.particleImages.length > 1) {\n          // if using ordered art\n          if(whichArt !== -1) {\n            // get current art index, then increment for the next particle\n            p.applyArt(this.particleImages[whichArt]);\n          } else if (this._currentImageIndex !== -1) {\n            // get current art index, then increment for the next particle\n            p.applyArt(this.particleImages[this._currentImageIndex++]);\n            // loop around if needed\n            if (this._currentImageIndex < 0 || this._currentImageIndex >= this.particleImages.length) {\n              this._currentImageIndex = 0;\n            }\n          } else {\n            // otherwise grab a random one\n            p.applyArt(this.particleImages[Math.floor(Math.random() * this.particleImages.length)]);\n          }\n\n        } else {\n          //if they are actually the same texture, a standard particle\n          //will quit early from the texture setting in setTexture().\n          p.applyArt(this.particleImages[0]);\n        }\n        //set up the start and end values\n        p.alphaList.reset(this.startAlpha);\n        if (this.minimumSpeedMultiplier != 1) {\n          p.speedMultiplier = Math.random() * (1 - this.minimumSpeedMultiplier) + this.minimumSpeedMultiplier;\n        }\n        p.speedList.reset(this.startSpeed);\n        p.acceleration.x = this.acceleration.x;\n        p.acceleration.y = this.acceleration.y;\n        p.maxSpeed = this.maxSpeed;\n        if (this.minimumScaleMultiplier != 1) {\n          p.scaleMultiplier = Math.random() * (1 - this.minimumScaleMultiplier) + this.minimumScaleMultiplier;\n        }\n        p.scaleList.reset(this.startScale);\n        p.colorList.reset(this.startColor);\n        //randomize the rotation speed\n        if (this.minRotationSpeed == this.maxRotationSpeed)\n          p.rotationSpeed = this.minRotationSpeed;\n        else\n          p.rotationSpeed = Math.random() * (this.maxRotationSpeed - this.minRotationSpeed) + this.minRotationSpeed;\n        p.rotationAcceleration = this.rotationAcceleration;\n        p.noRotation = this.noRotation;\n        //set up the lifetime\n        p.maxLife = lifetime;\n        //set the blend mode\n        p.blendMode = this.particleBlendMode;\n        //set the custom ease, if any\n        p.ease = this.customEase;\n        //set the extra data, if any\n        p.extraData = this.extraData;\n        //set additional properties to particle\n        this.applyAdditionalProperties(p);\n        //call the proper function to handle rotation and position of particle\n        this._spawnFunc(p, this._prevEmitterPos.x, this._prevEmitterPos.y, i);\n        //initialize particle\n        p.init();\n        //update the particle by the time passed, so the particles are spread out properly\n        p.update(timePassed);//we want a positive delta, because a negative delta messes things up\n        //add the particle to the display list\n        if (!p.parent) {\n          if (this.addAtBack)\n            this._parent.addChildAt(p, 0);\n          else\n            this._parent.addChild(p);\n        } else {\n          //kind of hacky, but performance friendly\n          //shuffle children to correct place\n          let children = this._parent.children;\n          //avoid using splice if possible\n          if (children[0] == p)\n            children.shift();\n          else if (children[children.length - 1] == p)\n            children.pop();\n          else {\n            let index = children.indexOf(p);\n            children.splice(index, 1);\n          }\n          if (this.addAtBack)\n            children.unshift(p);\n          else\n            children.push(p);\n        }\n        //add particle to list of active particles\n        if (this._activeParticlesLast) {\n          this._activeParticlesLast.next = p;\n          p.prev = this._activeParticlesLast;\n          this._activeParticlesLast = p;\n        } else {\n          this._activeParticlesLast = this._activeParticlesFirst = p;\n        }\n        ++this.particleCount;\n      }\n    }\n  }\n\n  protected _spawnRing(p: Particle, emitPosX: number, emitPosY: number): void {\n      const spawnCircle = this.spawnCircle;\n      // set the initial rotation/direction of the particle based on starting\n      // particle angle and rotation of emitter\n\n      if (this.minStartRotation === this.maxStartRotation)\n      {\n          p.rotation = this.minStartRotation + this.rotation;\n      }\n      else\n      {\n          p.rotation = (Math.random() * (this.maxStartRotation - this.minStartRotation)) + this.minStartRotation + this.rotation;\n      }\n      // place the particle at a random radius in the ring\n      if (spawnCircle.minRadius !== spawnCircle.radius)\n      {\n          helperPoint.x = (Math.random() * (spawnCircle.radius - spawnCircle.minRadius)) + spawnCircle.minRadius;\n      }\n      else\n      {\n          helperPoint.x = spawnCircle.radius;\n      }\n      helperPoint.y = 0;\n      // rotate the point to a random angle in the circle\n      const angle = (Math.random() * (this.maxStartRotation - this.minStartRotation)) + this.minStartRotation + this.rotation;\n\n      //p.rotation += angle;\n      ParticleUtils.rotatePoint(p.rotation, helperPoint);\n      // offset by the circle's center\n      helperPoint.x += this.spawnCircle.x;\n      helperPoint.y += this.spawnCircle.y;\n      // rotate the point by the emitter's rotation\n      if (this.rotation !== 0)\n      {\n          ParticleUtils.rotatePoint(this.rotation, helperPoint);\n      }\n      // set the position, offset by the emitter's position\n      p.position.x = emitPosX + helperPoint.x;\n      p.position.y = emitPosY + helperPoint.y;\n  }\n}","\nimport { ParticleUtils, PathParticle } from 'pixi-particles';\n\nexport class PathParticleBetter extends PathParticle\n{\n\n    private vv: [number, number] = [0,0];\n\n    public init() {\n        super.init();\n        this.vv = [0,-10];\n    }\n    /**\n     * Updates the particle.\n     * @param delta Time elapsed since the previous frame, in __seconds__.\n     */\n    public update(delta: number): number\n    {\n        const lerp = this.Particle_update(delta);\n        // if the particle died during the update, then don't bother\n\n        if (lerp >= 0 && this.path)\n        {\n            // increase linear movement based on speed\n            if (this._doSpeed)\n            {\n                const speed = this.speedList.interpolate(lerp) * this.speedMultiplier;\n\n                this.movement += speed * delta;\n            }\n            else\n            {\n                const speed = this.speedList.current.value * this.speedMultiplier;\n\n                this.movement += speed * delta;\n            }\n            let lastx = this.position.x;\n            let lasty = this.position.y;\n            // set up the helper point for rotation\n            let hPoint = this.path(this.movement, {x: this.position.x - this.initialPosition.x, y: this.position.y - this.initialPosition.y}, delta, this.vv);\n            this.position.x = this.initialPosition.x + hPoint.x;\n            this.position.y = this.initialPosition.y + hPoint.y;\n            this.alpha=  Math.min(1, Math.max(0, (hPoint.a + 0.5) * this.alpha ))\n            this.vv = [(this.position.x - lastx) / delta, (this.position.y - lasty) / delta]\n        }\n\n        return lerp;\n    }\n\n    /**\n     * Don't do anything\n     */\n    public static parseData(extraData: any): any\n    {\n        return extraData;\n    }\n}","import { Container, Application, Point, Sprite, InteractionEvent, InteractionData, Loader } from \"pixi.js\";\nimport ClickTrack from 'click-track';\nimport State from \"./state\";\nimport { InstrumentState, InteractiveInstrument } from \"./interactive-instrument\";\nimport { DraggableSpawn } from \"./draggable-spawn\";\nimport { Interactive } from \"./interactive\";\nimport mainTrack from \"./tracks/main/\";\nimport { CueEvent } from \"click-track/dist/src/definitions/cue-event\";\nimport { Emitter } from \"pixi-particles\";\nimport { ParticleCue } from \"./types/particle-cue\";\nimport { Draggable } from \"./draggable\";\nimport { PerformanceVideoPlayer } from \"./performance-video-player\";\nimport ProgressBar from \"./progress-bar\";\nimport GradientBackdrop from \"./gradient-backdrop\";\nimport stageImage from '../assets/images/stage_complete_2.svg';\nimport { COLOR_BOOKSTORE_HIGHLIGHT, COLOR_BUS_HIGHLIGHT, COLOR_DESERT_HIGHLIGHT, COLOR_FOREST_HIGHLIGHT, COLOR_LAKE_HIGHLIGHT, COLOR_MOUNTAIN_HIGHLIGHT, COLOR_RECAP_HIGHLIGHT, COLOR_HALL_HIGHLIGHT } from \"./colors\";\nimport { Button } from \"./button\";\n\n\nimport environmentFgLeftBusUrl from '../assets/images/environments/bus/bus_foreground_left.svg';\nimport environmentFgRightBusUrl from '../assets/images/environments/bus/bus_foreground_right.svg';\n\nimport environmentBkgLeftBookstoreUrl from '../assets/images/environments/bookstore/bookstore_background_left.svg';\nimport environmentBkgRightBookstoreUrl from '../assets/images/environments/bookstore/bookstore_background_right.svg';\nimport environmentFgLeftBookstoreUrl from '../assets/images/environments/bookstore/bookstore_foreground_left.svg';\nimport environmentFgRightBookstoreUrl from '../assets/images/environments/bookstore/bookstore_foreground_right.svg';\n\nimport environmentBkgLeftDesertUrl from '../assets/images/environments/desert/desert_background_left.svg';\nimport environmentBkgRightDesertUrl from '../assets/images/environments/desert/desert_background_right.svg';\nimport environmentFgLeftDesertUrl from '../assets/images/environments/desert/desert_foreground_left.svg';\nimport environmentFgRightDesertUrl from '../assets/images/environments/desert/desert_foreground_right.svg';\n\nimport environmentBkgLeftForestUrl from '../assets/images/environments/forest/forest_background_left.svg';\nimport environmentBkgRightForestUrl from '../assets/images/environments/forest/forest_background_right.svg';\nimport environmentFgLeftForestUrl from '../assets/images/environments/forest/forest_foreground_left.svg';\nimport environmentFgRightForestUrl from '../assets/images/environments/forest/forest_foreground_right.svg';\n\nimport environmentBkgLeftLakeUrl from '../assets/images/environments/lake/lake_background_left.svg';\nimport environmentBkgRightLakeUrl from '../assets/images/environments/lake/lake_background_right.svg';\nimport environmentFgLeftLakeUrl from '../assets/images/environments/lake/lake_foreground_left.svg';\nimport environmentFgRightLakeUrl from '../assets/images/environments/lake/lake_foreground_right.svg';\n\nimport environmentBkgLeftMountainUrl from '../assets/images/environments/mountain/mountain_background_left.svg';\nimport environmentBkgRightMountainUrl from '../assets/images/environments/mountain/mountain_background_right.svg';\nimport environmentFgLeftMountainUrl from '../assets/images/environments/mountain/mountain_foreground_left.svg';\nimport environmentFgRightMountainUrl from '../assets/images/environments/mountain/mountain_foreground_right.svg';\n\nimport video1080 from '../assets/video/imagine-symphony-live-1080p.mp4';\nimport video720 from '../assets/video/imagine-symphony-live-720p.mp4';\nimport video360 from '../assets/video/imagine-symphony-live-360p.mp4';\n\nimport EnvironmentLayer from \"./environment-layer\";\nimport { ScoreReveal } from \"./score-reveal\";\n\ntype InteractiveCue = [Interactive, number, any];\n\nexport default class PerformanceState extends State {\n\n  protected track: HTMLAudioElement;\n  protected bkgVideo: PerformanceVideoPlayer;\n  protected interactives: Array<Interactive>;\n  private app: Application;\n  static clickTrack: ClickTrack<InteractiveCue>;\n  private clickTrackParticles: ClickTrack<ParticleCue>;\n  private interactivesContainer: Container;\n  private particleContainer: Container;\n  private emitters: Array<Emitter> = [];\n  protected intendedStageSize: [number, number];\n  protected centerStage: [number, number];\n  protected loadProgressbar: ProgressBar;\n  protected stageInteractiveBackground: Sprite = Sprite.from(stageImage);\n  private foregroundEnvironment: EnvironmentLayer;\n  private backgroundEnvironment: EnvironmentLayer;\n  protected bkg = new GradientBackdrop();\n  private skipButton: Button;\n  private conductToggleButton: Button;\n  private done = false;\n  private score: [number, boolean][] = [];\n  private reveal: ScoreReveal;\n\n  // DIY interaction management\n  private interactiveHovering?: Interactive;\n  private mousePos: Point;\n  private mouseChecked: boolean = true;\n  static dragSpawn: DraggableSpawn = new DraggableSpawn();\n  quietSound: boolean = false;\n  doScoreReveal: () => void;\n\n  async createContainer(app: Application, args: string): Promise<Container> {\n    this.app = app;\n    let trackUrl = '';\n    // Quality option\n    switch (args[1]) {\n      case \"1080\":\n        trackUrl = video1080;\n        break;\n      case \"720\":\n        trackUrl = video720;\n        break;\n      case \"360\":\n        trackUrl = video360;\n        break;\n      default:\n        throw Error(\"Must specify quality\");\n    }\n\n    try {\n      app.view.requestFullscreen();\n      screen.orientation.lock(\"landscape-primary\");\n    } finally {\n    }\n\n    // The container to be returned\n    const container = new Container();\n\n    container.addChild(this.bkg);\n    this.bkg.colorA = [0,0,0];\n    this.bkg.colorB = [0,0,0];\n\n    this.bkg.position.set(0,0);\n\n\n    // Get music track information\n    const {\n      interactives,\n      tempo,\n      offset,\n      particleCues,\n      stageSize,\n      stageCenter,\n    } = mainTrack();\n\n    app.renderer.backgroundColor = 0x000000;\n\n    this.intendedStageSize = [stageSize[0] + 250, (stageSize[1] + 416)];\n    this.centerStage = stageCenter;\n\n    this.bkgVideo = new PerformanceVideoPlayer(trackUrl, stageSize[0] + 250);\n    this.bkgVideo.alpha = 0;\n    container.addChild(this.bkgVideo);\n    this.bkgVideo.position.set(0,0);\n    this.bkgVideo.on(\"play\", () => {\n      if(!document.fullscreenElement) {\n        try {\n          app.view.requestFullscreen();\n          screen.orientation.lock(\"landscape-primary\");\n        } catch {}\n      }\n    });\n\n    const environmentBiomeIndexes = {\n      bus: 0,\n      bookstore: 1,\n      desert: 2,\n      forest: 3,\n      lake: 4,\n      mountain: 5,\n    };\n\n    this.foregroundEnvironment = new EnvironmentLayer([\n      [environmentFgLeftBusUrl, environmentFgRightBusUrl],\n      [environmentFgLeftBookstoreUrl, environmentFgRightBookstoreUrl],\n      [environmentFgLeftDesertUrl, environmentFgRightDesertUrl],\n      [environmentFgLeftForestUrl, environmentFgRightForestUrl],\n      [environmentFgLeftLakeUrl, environmentFgRightLakeUrl],\n      [environmentFgLeftMountainUrl, environmentFgRightMountainUrl],\n    ]);\n\n    this.backgroundEnvironment = new EnvironmentLayer([\n      // use bus blg as foreground too\n      [environmentFgLeftBusUrl, environmentFgRightBusUrl],\n      [environmentBkgLeftBookstoreUrl, environmentBkgRightBookstoreUrl],\n      [environmentBkgLeftDesertUrl, environmentBkgRightDesertUrl],\n      [environmentBkgLeftForestUrl, environmentBkgRightForestUrl],\n      [environmentBkgLeftLakeUrl, environmentBkgRightLakeUrl],\n      [environmentBkgLeftMountainUrl, environmentBkgRightMountainUrl],\n    ], true);\n\n    this.foregroundEnvironment.activeSprite = -1;\n    this.backgroundEnvironment.activeSprite = -1;\n\n    container.addChild(this.backgroundEnvironment);\n\n    // Assemble interactive things\n    this.interactivesContainer = new Container();\n    this.interactivesContainer.visible = false;\n    container.addChild(this.interactivesContainer);\n    this.interactivesContainer.position.set(window.innerWidth / 2, window.innerHeight * 3 / 4);\n\n    // DIY interaction management\n    this.interactivesContainer.interactive = true;\n    this.interactivesContainer.on(\"mousemove\", this.onMove.bind(this));\n\n    this.interactives = interactives;\n    this.stageInteractiveBackground.alpha = 0.3;\n    this.interactivesContainer.addChild(this.stageInteractiveBackground);\n\n    this.interactives.forEach((s1) => {\n      s1.interactive = true;\n      this.interactivesContainer.addChild(s1);\n      s1.on(\"maybeSpawn\", this.interactiveTapSpawn.bind(this));\n    });\n\n    // Origin set is handled in resize\n    PerformanceState.dragSpawn.visible = false;\n    container.addChild(PerformanceState.dragSpawn);\n    PerformanceState.dragSpawn.on(\"dragged\", this.onCircleDrag.bind(this));\n    interactives.push(PerformanceState.dragSpawn);\n\n    // Add childred\n    container.addChild(this.foregroundEnvironment);\n\n    // Assemble cues\n    const cues: Array<[number, InteractiveCue]> = [];\n\n    // Combine cues from all interactives\n    interactives.forEach((ii) => {\n      cues.push(...ii.cues.map<[number, InteractiveCue]>((cue) => [cue[0], [ii, cue[1], cue[2]]]));\n      ii.on(\"score\", this.scoreCue.bind(this));\n    });\n\n    // Sort all cues ascending\n    cues.sort((a, b) => Math.sign(a[0] - b[0]));\n\n    this.score = cues\n      .filter(([i, c]) => c[1] === InstrumentState.HIT)\n      .map((ce,i) => {\n        return [cues.indexOf(ce), false];\n      });\n\n    this.doScoreReveal = () => {\n      this.reveal = new ScoreReveal(this.score.map(([,t]) => [t]));\n      container.addChild(this.reveal);\n      this.onResize({width: window.innerWidth, height: window.innerHeight});\n      this.reveal.on(\"done\", (win: boolean) => {\n\n        this.bkgVideo.resume();\n        this.bkgVideo.canInteract = true;\n\n        container.removeChild(this.reveal);\n        delete this.reveal;\n      });\n    }\n\n\n    // Click track for syncing up\n    PerformanceState.clickTrack = new ClickTrack<InteractiveCue>({\n      timerSource: () => {\n        try {\n          return this.bkgVideo.currentTime\n        } catch {\n          return 0;\n        }\n      },\n      tempo,\n      offset,\n      cues: cues\n    });\n\n    PerformanceState.clickTrack.on(\"cue\", this.handleClickCue.bind(this));\n\n    const switchBiomeTheme = (theme: string) => {\n      this.bkg.biomeTheme = theme;\n      if(typeof environmentBiomeIndexes[theme] !== \"undefined\") {\n        this.foregroundEnvironment.activeSprite = environmentBiomeIndexes[theme];\n        if(theme === \"bus\") {\n          // bus doesn't have a bklg\n          this.backgroundEnvironment.activeSprite = -1;\n        } else {\n          this.backgroundEnvironment.activeSprite = environmentBiomeIndexes[theme];\n        }\n      } else {\n        this.foregroundEnvironment.activeSprite = -1;\n        this.backgroundEnvironment.activeSprite = -1;\n      }\n      this.interactives.forEach((i) => {\n        if(i instanceof InteractiveInstrument) {\n          switch (theme) {\n            case \"bookstore\":\n            case \"night\":\n              i.highlightColor = COLOR_BOOKSTORE_HIGHLIGHT;\n              break;\n\n            case \"bus\":\n              i.highlightColor = COLOR_BUS_HIGHLIGHT;\n              break;\n\n            case \"desert\":\n              i.highlightColor = COLOR_DESERT_HIGHLIGHT;\n              break;\n\n            case \"forest\":\n              i.highlightColor = COLOR_FOREST_HIGHLIGHT;\n              break;\n\n            case \"lake\":\n              i.blendBkg = true;\n              this.stageInteractiveBackground.alpha = 1;\n              i.highlightColor = COLOR_LAKE_HIGHLIGHT;\n              break;\n\n            case \"mountain\":\n              i.highlightColor = COLOR_MOUNTAIN_HIGHLIGHT;\n              break;\n\n            case \"recap\":\n              i.highlightColor = COLOR_RECAP_HIGHLIGHT;\n              break;\n\n            case \"hall\":\n            default:\n              i.highlightColor = COLOR_HALL_HIGHLIGHT;\n              break;\n          }\n        };\n      });\n    }\n\n    const switchBkgColors = (data: [[number,number,number],[number,number,number]]) => {\n      this.bkg.colorA = <[number,number,number]>data[0].map(d => d/100);\n      this.bkg.colorB = <[number,number,number]>data[1].map(d => d/100);\n    }\n\n    const biomeClickTrack = new ClickTrack<() => void>({\n      timerSource: PerformanceState.clickTrack.timer,\n      cues: [\n        [0, switchBkgColors.bind(this, [[0,0,0],[0,0,0]])],\n        [15.0, switchBkgColors.bind(this, [[38,27,17],[6,9,9]])],\n        [17.0, switchBkgColors.bind(this, [[54,41,31],[2,6,4]])],\n        [25.0, switchBkgColors.bind(this, [[18,19,16],[4,8,8]])],\n        [32.5, switchBkgColors.bind(this, [[4,8,8], [95,98,95]])],\n        [40.8, switchBkgColors.bind(this, [[29,27,24],[7,5,3]])],\n        [49.0, switchBkgColors.bind(this, [[25,24,22],[2,7,7]])],\n        [56.0, switchBkgColors.bind(this, [[7,5,3],[29,27,24]])],\n        [64.0, () => {\n          this.quietSound = true;\n        }],\n        [66.0, switchBkgColors.bind(this, [[7,5,3],[7,5,3]])],\n        [67.0, switchBkgColors.bind(this, [[7,5,3],[7,5,3]])],\n        [67.0, () => {\n\n          this.afterIntro(container);\n\n          const beginAfterIntro = () => {\n            PerformanceState.dragSpawn.killArrow()\n            this.bkgVideo.resume();\n            this.bkgVideo.canInteract = true;\n            if(this.conductToggleButton) {\n              this.conductToggleButton.off(\"pointertap\", beginAfterIntro);\n            }\n          };\n\n          this.bkgVideo.canInteract = false;\n          this.bkgVideo.pause();\n          this.playMode();\n\n          this.conductToggleButton.once(\"pointertap\", beginAfterIntro);\n          PerformanceState.dragSpawn.on('firstDrag',beginAfterIntro);\n        }],\n        [69, () => {\n          this.quietSound = false;\n        }],\n        [60  + 23.6, switchBiomeTheme.bind(this, \"lake\")], // lake\n        [60  + 49.5, switchBiomeTheme.bind(this, \"hall\")], // hall\n        [60  + 59.1, switchBiomeTheme.bind(this, \"desert\")], // desert\n        [120 + 41.7, switchBiomeTheme.bind(this, \"hall\")], // hall\n        [120 + 50.9, switchBiomeTheme.bind(this, \"forest\")], // forest\n        [180 + 6.5, switchBiomeTheme.bind(this, \"hall\")], // hall\n        [180 + 20, switchBiomeTheme.bind(this, \"mountain\")], // mountain\n        [180 + 53, switchBiomeTheme.bind(this, \"hall\")], // hall\n        [240 + 0, switchBiomeTheme.bind(this, \"bus\")], // bus\n        [240 + 32, switchBiomeTheme.bind(this, \"night\")], // bus\n        [240 + 40, switchBiomeTheme.bind(this, \"bookstore\")], // book store\n        [300 + 0, switchBiomeTheme.bind(this, \"hall\")], // hall\n        // [300 + 12, () => { //recap\n        //   this.interactives.forEach((i) => {\n        //     if(i instanceof InteractiveInstrument) {\n        //       i.partyTime();\n        //     }\n        //   });\n        // }],\n        [356,\n          () => {\n           this.bkg.colorA = [0,0,0];\n           this.bkg.colorB = [0,0,0];\n           // fading for interactivesContainer happens in tick()\n           this.done = true;\n          }\n        ],\n        [358.9,\n          () => {\n            this.theaterMode();\n            container.removeChild(this.conductToggleButton);\n          }\n        ],\n        [\n          410.5,\n          () => {\n            if(this.madeAnEffort) {\n              this.doScoreReveal();\n            }\n          }\n        ],\n        [\n          413,\n          () => {\n            if(this.madeAnEffort) {\n              this.bkgVideo.canInteract = false;\n              this.bkgVideo.pause();\n            }\n          }\n        ]\n      ]\n    });\n\n    biomeClickTrack.on(\"cue\", (e, {data}) => data && data());\n\n    // Sort all cues ascending\n    particleCues.sort((a, b) => Math.sign(a[0] - b[0]));\n\n    // this.clickTrackParticles = new ClickTrack<ParticleCue>({\n    //   timerSource: () => track.currentTime,\n    //   tempo,\n    //   offset,\n    //   cues: particleCues\n    // });\n\n    //this.clickTrackParticles.on(\"cue\", this.handleParticleCue.bind(this));\n\n    //this.particleContainer = new Container();\n    // SVG group size: 828 131.65\n    // Set instrument position to SVG group center\n    // @TODO put this in one spot\n    //this.particleContainer.position.set(window.innerWidth / 2 - 414, window.innerHeight * 3 / 4 -131.65);\n    //container.addChild(this.particleContainer);\n\n    this.loadProgressbar = new ProgressBar();\n    container.addChild(this.loadProgressbar);\n    this.loadProgressbar.position.set(window.innerWidth/2, window.innerHeight/2);\n    const loadIntervalCheck = setInterval(() => {\n      this.loadProgressbar.progress = this.bkgVideo.percentLoaded;\n    }, 200);\n\n    const loadPromise = new Promise(async (resolve, reject) => {\n      await new Promise((resolve, reject) => {\n\n        Loader.shared.add(\n          environmentFgLeftBusUrl,\n          environmentFgRightBusUrl,\n          environmentBkgLeftBookstoreUrl,\n          environmentBkgRightBookstoreUrl,\n          environmentFgLeftBookstoreUrl,\n          environmentFgRightBookstoreUrl,\n          environmentBkgLeftDesertUrl,\n          environmentBkgRightDesertUrl,\n          environmentFgLeftDesertUrl,\n          environmentFgRightDesertUrl,\n          environmentBkgLeftForestUrl,\n          environmentBkgRightForestUrl,\n          environmentFgLeftForestUrl,\n          environmentFgRightForestUrl,\n          environmentBkgLeftLakeUrl,\n          environmentBkgRightLakeUrl,\n          environmentFgLeftLakeUrl,\n          environmentFgRightLakeUrl,\n          environmentBkgLeftMountainUrl,\n          environmentBkgRightMountainUrl,\n          environmentFgLeftMountainUrl,\n          environmentFgRightMountainUrl,\n        ).load(resolve);\n      });\n      await new Promise((resolve, reject) => {\n        const loadTimeout = setTimeout(() => {\n          // Timeout error?\n          console.log(\"This is taking a while to load...\");\n        }, 5000);\n        this.bkgVideo.preload().then(() => {\n          clearTimeout(loadTimeout);\n          resolve();\n        });\n      });\n      this.bkgVideo.alpha = 1;\n      this.bkgVideo.canInteract = true;\n      this.loadProgressbar.progress = 1;\n\n      this.skipButton = new Button(\"SKIP INTRO\");\n      this.skipButton.setAnchor(1, 1);\n      container.addChild(this.skipButton);\n      this.skipButton.on(\"pointertap\", () => {\n        this.bkgVideo.currentTime = 60;\n        this.afterSkip(container);\n      });\n\n      clearInterval(loadIntervalCheck);\n      this.loadProgressbar.fadeOut();\n\n      this.onResize({width: window.innerWidth, height: window.innerHeight});\n      resolve();\n\n    });\n\n\n    this.bkgVideo.on(\"ended\", () => {\n      // shut it down!\n      biomeClickTrack.deconstruct();\n      PerformanceState.clickTrack.deconstruct();\n      //this.clickTrackParticles.deconstruct();\n      if(document.fullscreenElement) {\n        document.exitFullscreen();\n      }\n      this.events.get(\"complete\").dispatch(this, 1);\n    });\n\n    return container;\n  }\n\n  get madeAnEffort(): boolean {\n    return this.score.filter(([,d]) => d).length / this.score.length > 0.08;\n  }\n\n  scoreCue(cue) {\n    const scoreIndex = this.score.findIndex(([b]) => b === cue);\n    if(scoreIndex !== -1) {\n      this.score[scoreIndex][1] = true;\n    }\n  }\n\n  interactiveTapSpawn(interactive: InteractiveInstrument, e: InteractionEvent) {\n    if(PerformanceState.dragSpawn && PerformanceState.dragSpawn.draggingObject) {\n      interactive.onDrop(PerformanceState.dragSpawn.draggingObject);\n    }\n  }\n\n  afterSkip(container: Container) {\n    if(this.skipButton) {\n      container.removeChild(this.skipButton);\n      delete this.skipButton;\n    }\n  }\n\n  afterIntro(container: Container) {\n    if(this.skipButton) {\n      container.removeChild(this.skipButton);\n      delete this.skipButton;\n    }\n    if(!this.conductToggleButton) {\n      this.conductToggleButton = new Button(\"WATCH\");\n      this.conductToggleButton.setAnchor(1, 1);\n      container.addChild(this.conductToggleButton);\n      this.conductToggleButton.on(\"pointertap\", () => {\n        if(this.bkgVideo.theaterMode) {\n          this.playMode();\n          this.conductToggleButton.text = \"WATCH\";\n        } else {\n          this.theaterMode();\n          this.conductToggleButton.text = \"CONDUCT\";\n        }\n      });\n    }\n    this.onResize({width: window.innerWidth, height: window.innerHeight});\n  }\n\n  theaterMode() {\n    this.backgroundEnvironment.visible = false;\n    this.interactivesContainer.visible = false;\n    PerformanceState.dragSpawn.visible = false;\n    this.bkgVideo.theaterMode = true;\n    this.onResize({width: window.innerWidth, height: window.innerHeight});\n  }\n\n  playMode() {\n    this.backgroundEnvironment.visible = true;\n    this.interactivesContainer.visible = true;\n    PerformanceState.dragSpawn.visible = true;\n    this.bkgVideo.theaterMode = false;\n    this.onResize({width: window.innerWidth, height: window.innerHeight});\n  }\n\n  handleClickCue(clicktrack: ClickTrack, cue: CueEvent<InteractiveCue>) {\n    if(cue.data && cue.data[0]) {\n      const [interactive, state, value] = cue.data;\n      interactive.onCue(cue.cue, state, value);\n    }\n  }\n\n  handleParticleCue(clicktrack: ClickTrack, cue: CueEvent<ParticleCue>) {\n    if(cue.data) {\n      const emitter = new Emitter(\n        this.particleContainer,\n        cue.data[0],\n        {\n          ...cue.data[1],\n          autoUpdate: false,\n        }\n      );\n\n      this.emitters.push(emitter);\n    }\n  }\n\n  onCircleDrag(dragging: Draggable, e: InteractionEvent) {\n    if (this.app) {\n      const i = this.app.renderer.plugins.interaction.hitTest(e.data.global, this.interactivesContainer);\n      if (i && i instanceof InteractiveInstrument) {\n        i.emit(\"mousedragout\", this.mousePos);\n        i.emit(\"drop\", dragging, e);\n      }\n    }\n  }\n\n  onMove(e: InteractionEvent) {\n    this.mousePos = e.data.global;\n    this.mouseChecked = false;\n  }\n\n  onTick(deltaMs: number) {\n\n    this.bkg.onTick(deltaMs);\n    this.foregroundEnvironment.onTick(deltaMs);\n    this.backgroundEnvironment.onTick(deltaMs);\n\n    if(this.loadProgressbar && !this.loadProgressbar.destroyed) {\n      this.loadProgressbar.onTick(deltaMs);\n      return;\n    } else if(this.loadProgressbar) {\n      delete this.loadProgressbar;\n    }\n\n    if(this.quietSound) {\n      this.bkgVideo.volume = Math.max(0, this.bkgVideo.volume  - deltaMs / 180);\n    } else if(this.bkgVideo.volume < 1) {\n      this.bkgVideo.volume = Math.min(1, this.bkgVideo.volume + deltaMs / 5);\n    }\n\n    if(this.reveal) {\n      this.reveal.tick(deltaMs);\n    }\n\n    const currentBeat = PerformanceState.clickTrack.beat;\n    const beatDelta = (deltaMs / 1000) * PerformanceState.clickTrack.tempo;\n\n    if(this.done && this.interactivesContainer.alpha > 0) {\n      this.interactivesContainer.alpha -= deltaMs / 150;\n      if(this.interactivesContainer.alpha < 0) this.interactivesContainer.alpha = 0;\n      PerformanceState.dragSpawn.alpha = this.interactivesContainer.alpha;\n    }\n\n    for (let i = 0; i < this.interactives.length; i++) {\n      this.interactives[i].onTick(currentBeat, beatDelta);\n    }\n\n    for (let i = this.emitters.length - 1; i >= 0; i--) {\n      if(this.emitters[i].parent === null) {\n        // remove from array, it's destroyed\n        this.emitters.splice(i, 1);\n        continue;\n      }\n\n      // Perform update using beats\n      this.emitters[i].update(beatDelta);\n    }\n\n\n    // DIY mouse enter/mouse out interaction handling\n    // This is here because while draggin draggables, mouseenter and mouseout events aren't triggered\n    if(PerformanceState.dragSpawn.isDragging && this.app && !this.mouseChecked) {\n      this.mouseChecked = true;\n      const object = this.app.renderer.plugins.interaction.hitTest(this.mousePos, this.interactivesContainer);\n      if (object && object instanceof Interactive) {\n        const e = new InteractionEvent();\n        e.data = new InteractionData();\n        e.data.global = this.mousePos.clone();\n        if(!this.interactiveHovering) {\n          // Mouse enter\n          this.interactiveHovering = object;\n          this.interactiveHovering.emit(\"mousedragover\", e, PerformanceState.dragSpawn.draggingObject);\n        } else if(this.interactiveHovering !== object) {\n          // Mouse enter and out (new object)\n          object.emit(\"mousedragover\", e);\n          this.interactiveHovering.emit(\"mousedragout\", e, PerformanceState.dragSpawn.draggingObject);\n          this.interactiveHovering = object;\n        }\n      } else if(this.interactiveHovering) {\n        const e = new InteractionEvent();\n        e.data = new InteractionData();\n        e.data.global = this.mousePos.clone();\n        // mouse out\n        this.interactiveHovering.emit(\"mousedragout\", e);\n        this.interactiveHovering = undefined;\n      }\n    }\n  }\n\n  onResize(size: { width: number, height: number }) {\n\n    if(this.loadProgressbar && this.loadProgressbar.progress < 1) {\n      this.loadProgressbar.position.set(size.width/2, size.height/2);\n    }\n\n    const multiplier = Math.min(size.width / this.intendedStageSize[0], size.height / this.intendedStageSize[1]);\n    //this.interactivesContainer.scale.set(multiplier, multiplier);\n    this.interactives.forEach((s1) => {\n      s1.multiplierResize(multiplier);\n    });\n\n    this.stageInteractiveBackground.scale.set(multiplier);\n    const bounds = this.interactivesContainer.getBounds();\n\n    this.bkg.multiplierResize(multiplier);\n\n    this.bkgVideo.multiplierResize(multiplier);\n\n    const videoBounds = this.bkgVideo.getBounds();\n\n    if(this.reveal) {\n      this.reveal.scale.set(multiplier);\n      this.reveal.position.set(this.bkgVideo.position.x + this.bkgVideo.width *0.469, videoBounds.bottom - bounds.height * 0.98);\n    }\n\n    if(this.skipButton) {\n      this.skipButton.multiplierResize(multiplier);\n      this.skipButton.position.set(size.width - 10 * multiplier, size.height - 10 * multiplier);\n    }\n\n    if(this.conductToggleButton) {\n      this.conductToggleButton.multiplierResize(multiplier);\n      this.conductToggleButton.position.set(size.width - 10 * multiplier, size.height - 10 * multiplier);\n    }\n\n    this.interactivesContainer.position.set(\n      (size.width - bounds.width) / 2,\n      videoBounds.bottom - bounds.height * 0.30);\n\n    PerformanceState.dragSpawn.multiplierResize(multiplier);\n\n    PerformanceState.dragSpawn.setOrigin(\n      this.interactivesContainer.position.x + multiplier * this.centerStage[0],\n      this.interactivesContainer.position.y + multiplier * this.centerStage[1],\n    );\n\n    this.foregroundEnvironment.multiplierResize(multiplier);\n    this.backgroundEnvironment.multiplierResize(multiplier);\n\n    this.foregroundEnvironment.position.y = size.height;\n    this.backgroundEnvironment.position.y = this.interactivesContainer.position.y + multiplier * 80;\n\n  }\n\n  async cleanUp() {\n\n  }\n\n}","import { VideoPlayer } from \"./video-player\";\nimport { Graphics, Sprite, Loader, Container, Text, SCALE_MODES } from \"pixi.js\";\nimport videoMask from '../assets/images/video-mask.png';\nimport videoMaskFlat from '../assets/images/video-mask-flat.png';\nimport videoBkg from '../assets/images/video-bkg.png';\nimport { TEXT_STYLE_CENSORED } from \"./styles\";\n\nconst STAGE_WIDTH = 787;\nconst LETTERBOX_HEIGHT = 71;\nconst QUAD_CURVE_OFFSET = 175;\nexport class PerformanceVideoPlayer extends VideoPlayer {\n  protected bkgCurtainPad = new Graphics();\n  protected container = new Container();\n  private flatMask: Sprite;\n  private theaterMask: Sprite;\n  private flatMaskBacker: Graphics;\n  protected playButtonSizeRatio: number = 0.05;\n  protected autoplay = false;\n  public canInteract = false;\n  private _theaterMode = true;\n  constructor(public videoUrl: string, public width: number = STAGE_WIDTH, public accentColor: number = 0xffffff) {\n    super(videoUrl, width, accentColor);\n  }\n\n  async preload() {\n    await super.preload();\n    const w = this.videoSprite.width;\n    const h = this.videoSprite.height;\n\n    await new Promise((resolve) => {\n      if(Loader.shared.resources[videoMask]) return resolve();\n      Loader.shared.add(videoMask).load(resolve);\n    });\n    await new Promise((resolve) => {\n      if(Loader.shared.resources[videoMaskFlat]) return resolve();\n      Loader.shared.add(videoMaskFlat).load(resolve);\n    });\n    await new Promise((resolve) => {\n      if(Loader.shared.resources[videoBkg]) return resolve();\n      Loader.shared.add(videoBkg).load(resolve);\n    });\n\n    const bkgSprite = Sprite.from(videoBkg);\n    bkgSprite.scale.set(w / (bkgSprite.width));\n    bkgSprite.position.set(0, LETTERBOX_HEIGHT);\n    this.container.addChild(bkgSprite);\n\n    this.flatMask = Sprite.from(videoMaskFlat);\n    this.flatMask.scale.set(w / (this.flatMask.width));\n    this.flatMask.position.set(0,LETTERBOX_HEIGHT);\n\n    this.theaterMask = Sprite.from(videoMask);\n    this.theaterMask.scale.set(w / (this.theaterMask.width));\n    this.theaterMask.position.set(0,LETTERBOX_HEIGHT);\n\n    this.flatMaskBacker = new Graphics();\n    this.flatMaskBacker.clear()\n      .beginFill(0x000000)\n      .drawRect(0,0,this.flatMask.width, this.flatMask.height);\n    this.container.addChild(this.flatMaskBacker);\n    this.flatMaskBacker.position.set(0,LETTERBOX_HEIGHT)\n\n    this.addChild(this.bkgCurtainPad);\n    this.addChild(this.container);\n\n    this.theaterMode = true;\n\n    this.removeChild(this.videoSprite);\n    this.removeChild(this.overlayGraphics);\n    this.container.addChild(this.videoSprite);\n    this.container.addChild(this.overlayGraphics);\n\n  }\n\n  interact() {\n    if(!document.fullscreenElement) {\n      this.playpause();\n    } else {\n      document.exitFullscreen();\n    }\n  }\n\n  set theaterMode(on: boolean) {\n    this._theaterMode = on;\n    if(!on) {\n      this.container.removeChild(this.flatMask);\n      this.container.addChild(this.theaterMask);\n      this.videoSprite.mask = this.theaterMask;\n      //this.bkgCurtainPad.visible = true;\n      this.flatMaskBacker.visible = false;\n    } else {\n      this.container.removeChild(this.theaterMask);\n      this.container.addChild(this.flatMask);\n      this.videoSprite.mask = this.flatMask;\n      //this.bkgCurtainPad.visible = false;\n      this.flatMaskBacker.visible = true;\n    }\n\n    this.multiplierResize(this.container.scale.x);\n  }\n\n  get theaterMode(): boolean {\n    return this._theaterMode;\n  }\n\n  multiplierResize(multiplier: number) {\n    if(!this.videoSprite) return;\n    this.container.scale.set(multiplier);\n\n    let paddTop = 0;\n    if(!document.fullscreenElement) {\n      const nav = document.getElementsByTagName(\"nav\");\n      if(nav && nav[0]) {\n        const {y,height} = nav[0].getBoundingClientRect();\n        paddTop = y + height;\n      }\n    }\n\n    if(this._theaterMode) {\n      this.container.position.y = (window.innerHeight - paddTop - this.container.height) / 2 - LETTERBOX_HEIGHT * multiplier + paddTop;\n    } else {\n      this.container.position.y = (-LETTERBOX_HEIGHT) * multiplier + paddTop;\n    }\n    this.container.position.x = (window.innerWidth - this.container.width) / 2;\n\n    this.bkgCurtainPad.position.set(0, 0);\n    this.bkgCurtainPad.clear()\n      .beginFill(0x000000)\n      .drawRect(0, this.container.position.y + LETTERBOX_HEIGHT * multiplier, this.container.position.x, this.container.height)\n      .drawRect(this.container.width + this.container.position.x, this.container.position.y + LETTERBOX_HEIGHT * multiplier, this.container.position.x, this.container.height)\n      .endFill();\n\n  }\n\n}","import { Graphics, Container, Text, Sprite } from \"pixi.js\";\nimport { TEXT_STYLE_LOADING } from \"./styles\";\n\nconst PROGRESS_BAR_WIDTH = 200;\nconst PROGRESS_BAR_HEIGHT = 30;\n\nimport note_8Up from '../assets/images/note-notations/8-up.svg';\n\nexport default class ProgressBar extends Container {\n  private _progress: number = 0;\n  private _animprogress: number = 0;\n  //private graphics: Graphics = new Graphics();\n  private needDraw = false;\n  private loadingText = new Text(\"Buffering...\", TEXT_STYLE_LOADING);\n  private fading = false;\n  private notes: Sprite[];\n  private time: number = 0;\n\n  constructor() {\n    super();\n    //this.graphics.alpha = 0;\n    //this.addChild(this.graphics);\n    this.addChild(this.loadingText);\n    this.notes = [\n      Sprite.from(note_8Up),\n      Sprite.from(note_8Up),\n      Sprite.from(note_8Up),\n      Sprite.from(note_8Up),\n      Sprite.from(note_8Up),\n      Sprite.from(note_8Up),\n    ];\n\n    this.notes.forEach((n, i, a) => {\n      this.addChild(n);\n      n.anchor.set(0.5,0.8);\n      n.scale.set(0.2);\n      n.alpha = 0.25;\n      n.position.set((((i+0.5)/a.length)-0.5) * PROGRESS_BAR_WIDTH, -PROGRESS_BAR_HEIGHT);\n    });\n    this.loadingText.anchor.set(0.5);\n    this.loadingText.position.set(0,0);\n    this.needDraw = true;\n  }\n\n  fadeOut() {\n    this.removeChild(this.loadingText);\n    this.fading = true;\n    this.needDraw = true;\n  }\n\n  set progress(p: number) {\n    this._progress = Math.max(0, Math.min(p, 1));\n    this.needDraw = true;\n  }\n\n  get progress(): number {\n    return this._progress;\n  }\n\n  get destroyed() {\n    return this._destroyed;\n  }\n\n  onTick(deltaMs) {\n    if(this.fading) {\n      // this.graphics.alpha = Math.max(0, this.graphics.alpha - deltaMs / 100);\n      this.notes.forEach((n, i, a) => {\n        n.alpha = Math.max(0, n.alpha - deltaMs / 30);\n      });\n      if(this.notes[0].alpha <= 0) {\n        this.destroy();\n      }\n    }\n\n      this.time += deltaMs;\n      this.notes.forEach((n, i, a) => {\n        if(!this.fading && this._progress*a.length > i - 0.5) {\n          n.alpha += deltaMs / 30;\n          if(n.alpha > 1) n.alpha = 1;\n        }\n        n.position.y = -PROGRESS_BAR_HEIGHT - (Math.sin(this.time/10 + i*Math.PI/6)+1)*10*n.alpha;\n      });\n    // if(this._animprogress != this._progress) {\n    //   const diff = Math.abs(this._progress - this._animprogress);\n    //   const dir = Math.sign(this._progress - this._animprogress);\n    //   if(PROGRESS_BAR_WIDTH * diff < 1 && diff > 0) {\n    //     this.needDraw = true;\n    //     this._animprogress = this._progress;\n    //   } else if(diff > 0) {\n    //     this.needDraw = true;\n    //     this._animprogress += Math.min(diff, dir * deltaMs / 100);\n    //   }\n    // }\n    // if(this.needDraw) {\n    //   this.draw();\n    // }\n  }\n\n  // draw() {\n  //   this.graphics.clear()\n  //     .beginFill(0x000000)\n  //     .drawRect(-window.innerWidth/2, -window.innerHeight/2, window.innerWidth, window.innerHeight)\n  //     .endFill()\n  //     if(!this.fading) {\n  //       this.graphics\n  //         .lineStyle(2, 0xffffff)\n  //         .drawRect(-PROGRESS_BAR_WIDTH/2, -PROGRESS_BAR_HEIGHT/2, PROGRESS_BAR_WIDTH, PROGRESS_BAR_HEIGHT)\n  //         .beginFill(0xffffff)\n  //         .drawRect(-PROGRESS_BAR_WIDTH/2, -PROGRESS_BAR_HEIGHT/2, PROGRESS_BAR_WIDTH * this._animprogress, PROGRESS_BAR_HEIGHT)\n  //     }\n\n  //   this.needDraw = false;\n  // }\n\n}","import { BLEND_MODES, Container, filters, Sprite} from \"pixi.js\";\n\nimport note_8Up from '../assets/images/note-notations/8-up.svg';\nimport orb from '../assets/images/bloom-32x32.png';\n\nexport class ScoreReveal extends Container {\n\n  private time: number = 0;\n  private notes: [Sprite, number, number][];\n  private totalScore: number = 0;\n  private revealTime: number = 0;\n  centerOrb: Sprite;\n\n  constructor(private score: [boolean][]) {\n    super();\n\n    this.centerOrb = Sprite.from(orb)\n    this.addChild(this.centerOrb);\n    this.centerOrb.position.set(0,0);\n    this.centerOrb.anchor.set(0.5);\n    this.centerOrb.blendMode = BLEND_MODES.ADD;\n    this.centerOrb.alpha = 0;\n\n    this.notes = score.map(([gotIt], i, a) => {\n      this.totalScore += gotIt ? 1 : 0;\n      let note: Sprite;\n      note = Sprite.from(orb);\n      note.alpha = 0.4;\n      note.anchor.set(0.5, 0.5);\n      note.blendMode = BLEND_MODES.ADD;\n      note.scale.set(0.2);\n      this.addChild(note);\n      return [note, 0, this.totalScore];\n    });\n\n    this.revealTime = (this.totalScore / this.notes.length) * 300;\n\n  }\n\n  setNotes(tOffset, radius) {\n    this.notes.forEach(([note, revealed], i, a) => {\n      let t = Math.PI*2 * (i/a.length) + Math.PI/2 + tOffset;\n      note.position.set(Math.cos(t) * radius, -Math.sin(t) * radius);\n      note.rotation = -t + Math.PI/2;\n      if(revealed) {\n        note.scale.set(Math.min(0.2, radius/400));\n      } else {\n        note.scale.set(Math.min(0.2, Math.max(0.8, radius/400)));\n      }\n    });\n  }\n\n  revealNotes(percent) {\n    this.notes.forEach(([note, revealed, sIndex], i, a) => {\n      if(!revealed && percent*this.totalScore > sIndex) {\n        if(this.score[i][0]) {\n          this.removeChild(note);\n          note = Sprite.from(note_8Up);\n          this.notes[i] = [note, 0.0001, sIndex];\n          this.addChild(note);\n          note.anchor.set(0.3, 0.9);\n          note.scale.set(0.2);\n          note.alpha = 0;\n        }\n      }\n      if(revealed) {\n        let al = percent*this.totalScore - sIndex;\n        note.alpha = Math.min(1, al/10);\n      }\n    });\n  }\n\n  tick(deltaMs: number) {\n    this.time += deltaMs;\n    let radius = 200;\n    if(this.time / 100 - Math.PI/2 < Math.PI/2) {\n      radius = 100*(Math.sin(this.time / 100 - Math.PI/2) + 1);\n    }\n\n    this.revealNotes((this.time - 200)/(this.revealTime));\n    let speedX = 2;\n    if(this.time / 100 < Math.PI/2) {\n      speedX = (Math.sin(this.time / 100) + 1);\n    }\n    if(this.time > (this.revealTime + 300)) {\n      let fadeout = Math.min(1,(this.time - (this.revealTime + 300))/100);\n      speedX = fadeout * 0.25 + 2;\n      if(this.totalScore >= this.notes.length) {\n        //this.alpha = 1 - fadeout;\n        let fadeoutPh1 = Math.min(0.5, fadeout) * 2;\n        let fadeoutPh2 = (Math.max(0.5, fadeout) - 0.5) * 2;\n        radius = 200 - 200 * fadeoutPh1 * fadeoutPh1;\n        this.centerOrb.alpha = Math.max(0.5, fadeoutPh2);\n        this.centerOrb.scale.set((-(fadeoutPh2-1)*(fadeoutPh2-1) + 1) * 100);\n\n      } else {\n        this.alpha = 1 - fadeout;\n        radius = 200 + 500 * fadeout * fadeout;\n      }\n\n      if(fadeout >= 1) {\n        this.emit(\"done\", this.totalScore >= this.notes.length);\n        this.destroy();\n      }\n    }\n    this.setNotes(0.5 * speedX * this.time / 100, radius);\n  }\n\n}","import { Application, Container } from \"pixi.js\";\nimport State from \"./state\";\nimport { StateEvents } from \"./types/state-events\";\nimport PerformanceState from './performance-state';\nimport TitleState from \"./title-state\";\n\ntype StateNames = \"intro\" | \"performance\";\n\nexport class StateMachine {\n  protected states: Array<{name: string, state: State}> = new Array();\n  protected currentStateName: string;\n  protected currentState: State;\n  protected currentStateContainer: Container;\n  private resizePollInterval = 500;\n  private previousWindowDimensions: {width: number, height: number} = {width: window.innerWidth, height: window.innerHeight};\n  private windowDimensions: {width: number, height: number} = {width: window.innerWidth, height: window.innerHeight};\n\n  constructor(public app: Application) {\n\n    setInterval(this.checkResizeEvent.bind(this), this.resizePollInterval);\n\n    window.addEventListener(\"resize\", () => {\n      this.windowDimensions.width = window.innerWidth;\n      this.windowDimensions.height = window.innerHeight;\n    });\n\n    app.ticker.add(this.tick, this);\n\n    this.addState(\"intro\", new TitleState());\n    this.addState(\"performance\", new PerformanceState());\n    this.addStateCondition(\"intro\", \"complete\", \"performance\");\n    this.addStateCondition(\"performance\", \"complete\", \"intro\");\n\n    this.setState(\"intro\");\n  }\n\n  tick(deltams:number) {\n    if(this.currentState) {\n      this.currentState.onTick(deltams);\n    }\n  }\n\n  checkResizeEvent() {\n    if(this.windowDimensions.height !== this.previousWindowDimensions.height || this.windowDimensions.width !== this.previousWindowDimensions.width) {\n      this.previousWindowDimensions.height = this.windowDimensions.height;\n      this.previousWindowDimensions.width = this.windowDimensions.width;\n      if(this.currentState) {\n        this.currentState.onResize(this.windowDimensions);\n      }\n    }\n  }\n\n  addState(name: StateNames, state: State) {\n    this.states.push({name, state});\n  }\n\n  addStateCondition(triggerState: StateNames, stateEvent: StateEvents, induceState: StateNames) {\n    const stateF = this.states.find(({name}) => name == triggerState);\n    if(!stateF) {\n      throw new Error(`State ${triggerState} unknown`);\n    }\n\n    stateF.state.on(stateEvent, this.setState.bind(this, induceState));\n  }\n\n  async setState(findName: StateNames, ...otherArgs) {\n    const stateF = this.states.find(({name}) => name == findName);\n    if(!stateF) {\n      throw new Error(`State ${findName} unknown`);\n    }\n    const newContainer = await stateF.state.createContainer(this.app, otherArgs);\n    stateF.state.onResize(this.windowDimensions);\n    if(this.currentState) {\n      await this.currentState.cleanUp();\n    }\n    if(this.currentStateContainer) {\n      this.app.stage.removeChild(this.currentStateContainer);\n      this.currentStateContainer.destroy();\n    }\n    this.app.stage.addChild(newContainer);\n    this.currentStateContainer = newContainer;\n    this.currentStateName = findName;\n    this.currentState = stateF.state;\n  }\n\n}","import { EventList, IEventHandler } from 'ste-events';\nimport { Container, Application } from 'pixi.js';\nimport { StateEvents } from './types/state-events';\n\nexport default abstract class State {\n  protected events = new EventList<State, any>();\n\n  // Adds event listener\n  on(event: StateEvents, fn: IEventHandler<this, any>): void {\n    this.events.get(event).subscribe(fn);\n  }\n\n  // Removes event listener\n  off(event: StateEvents, fn: IEventHandler<this, any>): void {\n    this.events.get(event).unsubscribe(fn);\n  }\n\n  onResize(size: {width: number, height: number}) {\n\n  }\n\n  onTick(deltaMs: number) {\n\n  }\n\n  abstract createContainer(app: Application, ...otherArgs: any): Promise<Container>;\n\n  abstract cleanUp(): Promise<void>;\n}","import { TextStyle } from \"pixi.js\";\n\ndeclare global {\n  interface Window {\n    WebFontConfig: object;\n  }\n}\n\nexport async function loadFonts() {\n  await new Promise((resolve) => {\n    // // Load them google fonts before starting...!\n    window.WebFontConfig = {\n      google: {\n        families: ['Roboto:400'],\n      },\n\n      active() {\n        resolve();\n      },\n    };\n\n    /* eslint-disable */\n    // include the web-font loader script\n    (function() {\n      const wf = document.createElement('script');\n      wf.src = `${document.location.protocol === 'https:' ? 'https' : 'http'\n      }://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js`;\n      wf.type = 'text/javascript';\n      wf.async = true;\n      const s = document.getElementsByTagName('script')[0];\n      if(s.parentNode) s.parentNode.insertBefore(wf, s);\n    }());\n    /* eslint-enabled */\n  });\n}\n\nexport const TEXT_STYLE_BUTTON = new TextStyle({\n  fill: \"#ffffff88\",\n  fontSize: 48,\n  fontFamily: \"Roboto\",\n  fontWeight: '400',\n})\n\nexport const TEXT_STYLE_BUTTON_HOVER = new TextStyle({\n  fill: \"#ffffff\",\n  fontSize: 48,\n  dropShadow: true,\n  dropShadowColor: '#ffffff',\n  dropShadowBlur: 5,\n  dropShadowAngle: 0,\n  dropShadowDistance: 0,\n  fontFamily: \"Roboto\",\n  fontWeight: '400',\n})\n\nexport const TEXT_STYLE_H2 = new TextStyle({\n  fill: \"#ffffff\",\n  fontSize: 24,\n  fontFamily: \"Roboto\",\n  fontWeight: '400',\n})\n\nexport const TEXT_STYLE_INTERACTIVE_NUM = new TextStyle({\n  fill: \"#ffffffaa\",\n  fontSize: 48,\n  fontFamily: \"Roboto\",\n  fontWeight: '400',\n})\n\nexport const TEXT_STYLE_CENSORED = new TextStyle({\n  fill: \"#ffffff\",\n  fontFamily: \"Mono\",\n  wordWrap: true,\n  fontSize: 8,\n  fontWeight: 'bold'\n})\n\nexport const TEXT_STYLE_LOADING = new TextStyle({\n  fill: \"#ffffff\",\n  fontFamily: \"Mono\",\n  wordWrap: true,\n  fontSize: 18,\n})\n\nexport const TEXT_STYLE_BIO_P = new TextStyle({\n  fill: \"#ffffff\",\n  fontFamily: \"Roboto\",\n  fontWeight: '400',\n  wordWrap: true,\n  wordWrapWidth: 400,\n  fontSize: 12,\n})\n\nexport const TET_STYLE_BIO_SUBTITLE = new TextStyle({\n  fill: \"#EF7700\",\n  fontFamily: \"Roboto\",\n  fontWeight: '400',\n  fontSize: 12,\n});","import { Container, Application, Text, Sprite, BLEND_MODES, Loader } from \"pixi.js\";\nimport State from \"./state\";\nimport { TEXT_STYLE_BUTTON, TEXT_STYLE_BUTTON_HOVER } from \"./styles\";\nimport logoUrl from '../assets/images/logo.png';\nimport titleBkgUrl from '../assets/images/title-bkg.jpg';\n\nexport default class TitleState extends State {\n  static qualitySelected: string = '';\n  private playButton: Text;\n  private optionButtons: [Text, string][];\n  private logo: Sprite;\n  private bkg: Sprite;\n  async createContainer(app: Application): Promise<Container> {\n\n    const container = new Container();\n\n    await new Promise((resolve) => {\n      if(Loader.shared.resources[titleBkgUrl]) return resolve();\n      Loader.shared.add(titleBkgUrl).load(resolve);\n    });\n    await new Promise((resolve) => {\n      if(Loader.shared.resources[logoUrl]) return resolve();\n      Loader.shared.add(logoUrl).load(resolve);\n    });\n\n    this.bkg = Sprite.from(titleBkgUrl);\n    this.bkg.alpha = 0.5;\n    this.bkg.anchor.set(0.5, 0.5);\n    this.logo = Sprite.from(logoUrl);\n    this.logo.anchor.set(0.5, 0);\n\n    container.addChild(this.bkg);\n    container.addChild(this.logo);\n\n    this.optionButtons = [\n      [new Text(\"1080p HD (170 MB)\", TEXT_STYLE_BUTTON), \"1080\"],\n      [new Text(\"720p (97 MB)\", TEXT_STYLE_BUTTON), \"720\"],\n      [new Text(\"360p (30 MB)\", TEXT_STYLE_BUTTON), \"360\"],\n    ];\n\n    this.optionButtons.forEach(([text, optionArg], i, a) => {\n      text.visible = false;\n      text.interactive = false;\n      text.anchor.set(0.5, 0);\n      text.cursor = \"pointer\";\n      text.on(\"mouseover\", () => text.style = TEXT_STYLE_BUTTON_HOVER);\n      text.on(\"mouseout\", () => text.style = TEXT_STYLE_BUTTON);\n      container.addChild(text);\n      text.on(\"pointertap\", () => {\n        TitleState.qualitySelected = optionArg;\n        this.events.get(\"complete\").dispatch(this, optionArg);\n      });\n    });\n\n    this.playButton = new Text(\"PLAY\", TEXT_STYLE_BUTTON);\n    this.playButton.anchor.set(0.5, 0);\n    container.interactive = true;\n    container.cursor = \"pointer\";\n    container.on(\"mouseover\", () => {\n      //app.renderer.backgroundColor = 0x111111;\n      this.playButton.style = TEXT_STYLE_BUTTON_HOVER;\n    });\n    container.on(\"mouseout\", () => {\n      app.renderer.backgroundColor = 0x000000;\n      this.playButton.style = TEXT_STYLE_BUTTON ;\n    });\n    container.on(\"pointertap\", () => {\n      container.removeChild(this.playButton);\n      container.interactive = false;\n      container.cursor = \"auto\";\n      this.bkg.alpha = 0.2;\n      this.logo.alpha = 0;\n      if(TitleState.qualitySelected) {\n        this.events.get(\"complete\").dispatch(this, TitleState.qualitySelected);\n      } else {\n        this.optionButtons.forEach(([text, optionArg], i, a) => {\n          text.visible = true;\n          text.interactive = true;\n        });\n      }\n    });\n    container.addChild(this.playButton);\n\n    app.renderer.backgroundColor = 0x000000;\n\n    return container;\n  }\n\n  onResize(size: {width: number, height: number}) {\n\n    let paddTop = 0;\n    if(!document.fullscreenElement) {\n      const nav = document.getElementsByTagName(\"nav\");\n      if(nav && nav[0]) {\n        const {y,height} = nav[0].getBoundingClientRect();\n        paddTop = y + height;\n      }\n    }\n\n    const scale = Math.min(1, size.width / 1529);\n    this.logo.scale.set(scale);\n    this.logo.position.set(size.width/2, paddTop + 10 * scale);\n    const logoBounds = this.logo.getBounds();\n\n    const bottomMost = logoBounds.bottom;\n    const centerBottom = Math.max(bottomMost, paddTop + (size.height - paddTop)/2);\n\n    this.bkg.scale.set(scale);\n    this.bkg.position.set(size.width/2, centerBottom);\n    this.playButton.scale.set(scale);\n    this.playButton.position.set(size.width/2, centerBottom);\n\n    this.optionButtons.forEach(([text], i, a) => {\n      text.scale.set(scale);\n      text.position.set(size.width/2, centerBottom + scale * 60 *(i - a.length/2));\n    });\n  }\n\n  async cleanUp() {\n\n  }\n\n}","import { InteractiveInstrument } from \"../../interactive-instrument\";\nimport { interactives } from \"./track-interactives\";\nimport { InteractiveTrack } from \"../../types/interactive-track\";\n\nexport default function (): InteractiveTrack {\n  return {\n    interactives: interactives.map((i) => {\n      const o = new InteractiveInstrument(i.color, i.graphicsPath);\n      o.cues = i.cues;\n      o.name = i.name;\n      return o;\n    }),\n    stageSize: [787, 203],\n    stageCenter: [787 / 2, 203],\n    particleCues: [],//particles,\n    tempo: 148,\n    offset: 66.440 - 4.917 - 0.202, // start of violin, and 4.917 is \"magic number\"\n  }\n}\n","type fn = (options: {\n  beat: number,\n  noteProgress: number,\n  noteDuration: number,\n  phraseProgress: number,\n  phraseDuration: number,\n  pitch?: number | null,\n  isTremelo?: boolean,\n  isCrescendo?: boolean\n}) => number;\n\nexport type MotionFn = {\n  x?: fn,\n  y?: fn,\n  t?: fn,\n  lerpFromIdle?: boolean,\n}\n\n// x is -inf to +inf\n// returns -1 to 1\nconst zeroToOneExp = (x) => {\n  if(x < 0) return 1-(1/(1+x));\n  return -1-(1/(-1-x));\n};\n\nexport const gongMotion: MotionFn = {\n  x: ({isCrescendo, phraseProgress, phraseDuration, noteProgress, noteDuration}) => {\n    // Decaying after note played\n    if(noteProgress > noteDuration) return 0;\n    const noteI = noteProgress / noteDuration;\n    // Increase intensity over phrase\n    if(isCrescendo) {\n      const progressi = Math.min(1, Math.max(0, phraseProgress / phraseDuration));\n      return Math.cos(100 * Math.pow(noteI * Math.PI, 0.5)) * (progressi) * 2;\n    }\n    // Decrease intensity over phrase\n    return Math.cos(100 * Math.pow(noteI * Math.PI, 0.5)) * (1-noteI) * 2;\n  },\n  y: ({isCrescendo, phraseProgress, phraseDuration, noteProgress, noteDuration}) => {\n    // Decaying after note played\n    if(noteProgress > noteDuration) return 0;\n    const noteI = noteProgress / noteDuration;\n    // Increase intensity over phrase\n    if(isCrescendo) {\n      const progressi = Math.min(1, Math.max(0, phraseProgress / phraseDuration));\n      return Math.cos(100 * Math.pow(noteI * Math.PI * 3 + 0.5, 0.5)) * (progressi) * 2;\n    }\n    // Decrease intensity over phrase\n    return Math.cos(100 * Math.pow(noteI * Math.PI * 3 + 0.5, 0.5)) * (1-noteI) * 2;\n  },\n};\n\nexport const suspCymbMotion: MotionFn = {\n  t: ({isCrescendo, phraseProgress, phraseDuration, noteProgress, noteDuration}) => {\n    const progressi = Math.min(1, Math.max(0, phraseProgress / phraseDuration));\n    // Decaying after note played\n    if(noteProgress > noteDuration) return Math.cos(100 * noteProgress) * Math.PI * (1/(noteProgress - noteDuration + 1)) / 32;\n    const noteI = noteProgress / noteDuration;\n    // Increasing intensity over note\n    if(!isCrescendo) return Math.cos(100 * Math.pow(noteI * Math.PI, 0.5)) * Math.PI * (1-noteI) / 8;\n    // Increasing intensity over phrase\n    return Math.cos(100 * Math.pow(noteI * Math.PI, 0.5)) * Math.PI * (progressi) / 8;\n  },\n};\n\nexport const timpaniMotion: MotionFn = {\n  y: ({noteProgress, isTremelo, noteDuration, isCrescendo, phraseProgress, phraseDuration}) => {\n    const progressi = Math.min(1, Math.max(0, phraseProgress / phraseDuration));\n    // No decay animation\n    if(noteProgress > noteDuration) return 0;\n    // drum roll\n    if(isTremelo) {\n      if(isCrescendo) {\n        return (Math.abs(Math.cos(noteProgress * Math.PI * 3))) * 2 * (1 + progressi * 2);\n      }\n      return (Math.abs(Math.cos(noteProgress * Math.PI * 3))) * 4;\n    }\n    // single hit\n    if(isCrescendo) {\n      return (1-(noteProgress/ noteDuration)) * 2 * (1 + progressi * 2);\n    }\n    return (1-(noteProgress/ noteDuration)) * 5;\n  },\n};\n\nexport const hornMotion: MotionFn = {\n  lerpFromIdle: true,\n  x: ({beat, noteDuration}) => {\n    const intensitySwing = (Math.max(0.5, Math.min(3, noteDuration)) / 3);\n    return -Math.sin(beat * Math.PI * 2 / 6) * 2 * intensitySwing;\n  },\n  y: ({beat, noteDuration}) => {\n    const intensitySwing = (Math.max(0.5, Math.min(3, noteDuration)) / 3);\n    return -Math.cos(beat * Math.PI * 2 / 6) * 5 * intensitySwing ;\n  },\n  t: ({beat, noteDuration, phraseProgress, phraseDuration, isCrescendo,noteProgress}) => {\n\n    let hitT = 0;\n    // No decay animation\n    if(noteProgress <= noteDuration) {\n      // single hit\n      if(isCrescendo) {\n        const progressi = Math.min(1, Math.max(0, phraseProgress / phraseDuration));\n        hitT = Math.sin(Math.PI*(noteProgress/ noteDuration)) * Math.PI/48 * (1 + progressi * 2);\n      } else {\n        hitT = Math.sin(Math.PI*(noteProgress/ noteDuration)) * Math.PI/64;\n      }\n    }\n\n    const intensitySwing = (Math.max(0.5, Math.min(3, noteDuration)) / 3);\n    return -Math.cos(beat * Math.PI * 2 / 6) * Math.PI/64 * intensitySwing - Math.PI/32 - hitT;\n  },\n};\n\nexport const hornDownMotion: MotionFn = {\n  lerpFromIdle: true,\n  x: ({beat, noteDuration}) => {\n    const intensitySwing = (Math.max(0.5, Math.min(3, noteDuration)) / 3);\n    return -Math.sin(beat * Math.PI * 2 / 6) * 2 * intensitySwing;\n  },\n  y: ({beat, noteDuration, phraseProgress, phraseDuration, isCrescendo,noteProgress}) => {\n    let hitY = 0;\n    // No decay animation\n    if(noteProgress <= noteDuration) {\n      // single hit\n      if(isCrescendo) {\n        const progressi = Math.min(1, Math.max(0, phraseProgress / phraseDuration));\n        hitY = Math.sin(Math.PI*(noteProgress/ noteDuration)) * (1 + progressi * 2);\n      } else {\n        hitY = Math.sin(Math.PI*(noteProgress/ noteDuration)) * 2;\n      }\n    }\n\n    const intensitySwing = (Math.max(0.5, Math.min(3, noteDuration)) / 3);\n    return -Math.cos(beat * Math.PI * 2 / 6) * 5 * intensitySwing + hitY;\n  },\n  t: ({beat, noteDuration}) => {\n    const intensitySwing = (Math.max(0.5, Math.min(3, noteDuration)) / 3);\n    return -Math.cos(beat * Math.PI * 2 / 6) * Math.PI/64 * intensitySwing + Math.PI/32;\n  },\n};\n\nexport const fluteMotion: MotionFn = {\n  lerpFromIdle: true,\n  x: ({beat, noteDuration}) => {\n    const intensitySwing = (Math.max(0.5, Math.min(3, noteDuration)) / 3);\n    return -Math.sin(beat * Math.PI * 4 / 6) * 2 * intensitySwing;\n  },\n  y: ({beat, noteDuration}) => {\n    const intensitySwing = (Math.max(0.5, Math.min(3, noteDuration)) / 3);\n    return -Math.cos(beat * Math.PI * 4 / 6) * 5 * intensitySwing ;\n  },\n  t: ({beat, noteDuration}) => {\n    const intensitySwing = (Math.max(0.5, Math.min(3, noteDuration)) / 3);\n    return -Math.cos(beat * Math.PI * 2 / 6) * Math.PI/64 * intensitySwing //- hitY;\n  },\n};\n\n\n\nexport const bassMotion: MotionFn = {\n  lerpFromIdle: true,\n  t: ({beat, noteDuration}) => {\n    const intensitySwing = (Math.max(0.5, Math.min(3, noteDuration)) / 3);\n    return Math.PI / 10 + Math.sin(beat * Math.PI * 2 / 4) * intensitySwing * Math.PI / 100;\n  },\n  x: ({beat, noteDuration}) => {\n    const intensitySwing = (Math.max(0.5, Math.min(3, noteDuration)) / 3);\n    return Math.sin(Math.sin(beat * Math.PI * 2 / 4) * intensitySwing * Math.PI / 100) * 100;\n  },\n};\n\nexport const violinMotion: MotionFn = {\n  lerpFromIdle: true,\n  x: ({beat, noteDuration}) => {\n    const intensitySwing = (Math.max(0.5, Math.min(3, noteDuration)) / 3);\n    return Math.sin(beat * Math.PI * 2 / 4) * 4 * intensitySwing;\n  },\n  t: ({noteProgress, isTremelo, noteDuration, isCrescendo, phraseProgress}) => {\n    if(noteProgress > noteDuration) return Math.PI / 2.5;\n    const noteI = noteProgress / noteDuration;\n    const intensitySwing = (Math.max(0.5, Math.min(3, noteDuration)) / 3);\n    if(isTremelo) {\n      return Math.PI / 2.5 + 0.5 * (Math.cos(noteProgress * Math.PI * 6) - 1) * Math.PI / 60;\n    }\n    return Math.PI / 2.5 + intensitySwing * (Math.cos(noteI * Math.PI * 2) - 1) * Math.PI / 60;\n  },\n}\n\n","import { InstrumentState } from \"../../interactive-instrument\";\n\nimport bassGraphics from '../../../assets/images/stage_complete.svg?path=path#bass&svg-path-as-graphics';\nimport brassGraphics from '../../../assets/images/stage_complete.svg?path=path#brass&svg-path-as-graphics';\nimport brass2Graphics from '../../../assets/images/stage_complete.svg?path=path#brass2&svg-path-as-graphics';\nimport celloGraphics from '../../../assets/images/stage_complete.svg?path=path#cello&svg-path-as-graphics';\nimport harpGraphics from '../../../assets/images/stage_complete.svg?path=path#harp&svg-path-as-graphics';\nimport hornGraphics from '../../../assets/images/stage_complete.svg?path=path#horn&svg-path-as-graphics';\nimport percussionGraphics from '../../../assets/images/stage_complete.svg?path=path#percussion&svg-path-as-graphics';\nimport pianoGraphics from '../../../assets/images/stage_complete.svg?path=path#piano&svg-path-as-graphics';\nimport violaGraphics from '../../../assets/images/stage_complete.svg?path=path#viola&svg-path-as-graphics';\nimport violin_1Graphics from '../../../assets/images/stage_complete.svg?path=path#violin&svg-path-as-graphics';\nimport violin_2Graphics from '../../../assets/images/stage_complete.svg?path=path#violin2&svg-path-as-graphics';\nimport woodwindGraphics from '../../../assets/images/stage_complete.svg?path=path#woodwind&svg-path-as-graphics';\nimport woodwind2Graphics from '../../../assets/images/stage_complete.svg?path=path#woodwind2&svg-path-as-graphics';\nimport { parts } from './score-export.json';\n\nimport bassIcon from '../../../assets/images/instrument-icons/insicon_bass.svg';\nimport brassIcon from '../../../assets/images/instrument-icons/insicon_brass.svg';\nimport celloIcon from '../../../assets/images/instrument-icons/insicon_cello.svg';\n//import choirIcon from '../../../assets/images/instrument-icons/insicon_choir.svg';\nimport clarinetIcon from '../../../assets/images/instrument-icons/insicon_clarinet.svg';\nimport cymbalsIcon from '../../../assets/images/instrument-icons/insicon_cymbals.svg';\nimport fluteIcon from '../../../assets/images/instrument-icons/insicon_flute.svg';\n//import gongIcon from '../../../assets/images/instrument-icons/insicon_gong.svg';\nimport harpIcon from '../../../assets/images/instrument-icons/insicon_harp.svg';\nimport hornIcon from '../../../assets/images/instrument-icons/insicon_horn.svg';\nimport keyboardIcon from '../../../assets/images/instrument-icons/insicon_keyboard.svg';\nimport oboeIcon from '../../../assets/images/instrument-icons/insicon_oboe.svg';\n//import percussionsectionIcon from '../../../assets/images/instrument-icons/insicon_percussionsection.svg';\nimport stringIcon from '../../../assets/images/instrument-icons/insicon_string.svg';\n//import synthIcon from '../../../assets/images/instrument-icons/insicon_synth.svg';\nimport tamtamIcon from '../../../assets/images/instrument-icons/insicon_tamtam.svg';\nimport timpaniIcon from '../../../assets/images/instrument-icons/insicon_timpani.svg';\nimport trumpetIcon from '../../../assets/images/instrument-icons/insicon_trumpet.svg';\n//import woodwindIcon from '../../../assets/images/instrument-icons/insicon_woodwind.svg';\nimport { MotionFn, bassMotion, timpaniMotion, suspCymbMotion, gongMotion, violinMotion, hornMotion, fluteMotion, hornDownMotion } from \"./instrument-motion-fn\";\n\n// P1: Flute 1, 2\n// P2: Oboe\n// P3: English Horn (Optional)\n// P4: Clarinet in Bb 1, 2\n// P5: Bass Clarinet\n// P6: Bassoon 1, 2\n// P7: Contrabassoon (Optional)\n// P8: Horn in F 1, 2\n// P9: Horn in F 3 (&amp; 4)\n// P10: Trumpet in Bb 1, 2\n// P11: Trumpet in Bb 3\n// P12: Trombone\n// P13: Bass Trombone\n// P14: Cimbasso (sub. Tuba or C.B Trombone)\n// P15: Timpani\n// P16: Cymbals\n// P17: Tamtam\n// P18: Electric Piano (Pre-Record)\n// P19: Piano (Optional)\n// P20: Celesta (Optioanl)\n// P21: Harp\n// P22: Soprano (Optional)\n// P23: Alto (Optional)\n// P24: Solo Violin I\n// P25: Solo  Violin II\n// P26: Solo Viola\n// P27: Solo Cello\n// P28: Violin I\n// P29: Violin 1 DIV\n// P30: Violin II\n// P31: Violin II DIV\n// P32: Viola\n// P33: Viola DIV\n// P34: Cello\n// P35: Cello DIV\n// P36: Double Bass\n\nfunction m2b(measure: number, beat: number): number {\n  return (measure - 1) * 6 + (beat - 1)\n}\n\ntype Notes = ({\n  note: number;\n} & NoteAttributes)[];\n\ntype NoteAttributes = {\n  pitch?: number | null;\n  words?: string;\n  duration?: number;\n  isTremelo?: boolean;\n  isCrescendo?: boolean;\n  stem?: number;\n};\n\nconst getSoloCues = (options: {spriteUrl: string, motionFn?: MotionFn}) => (notes: Notes): Array<[number, InstrumentState, any]> => {\n  const res = notes\n    .filter(({ words = '' }) => /solo|cue/.test(words))\n    .map(({ note, words = ''}, i, arr) => {\n\n      const matches = words.match(/(solo|cue)-(\\d+)(-cresc)?/i);\n      const beats = matches && matches[2] ? parseFloat(matches[2]) : 1;\n      const cresc = matches && !!(matches[3]);\n\n      // Round to start of a measure\n      let countIn = 6;\n      countIn = note - Math.floor((note - countIn) / 6) * 6;\n      // Make sure it's after last note though\n      if (i > 0 && note > arr[i - 1].note) {\n        // Would the cue-in occur before the last cue?\n        if (note - countIn < arr[i - 1].note) {\n          countIn = note - arr[i - 1].note - 3;\n        }\n      }\n      // Can't ever be smaller than 1 beat\n      if (countIn < 1) {\n        throw new Error(`countIn cannot be less than 1`);\n      }\n\n      // get notes about to be played\n      // get the first one\n\n      const playNotes = notes.filter((n, ii, notes) => {\n        // Exclude notes in the past\n        if(n.note < note) return false;\n        // Exclude the cue/notes/words\n        if(n.words) return false;\n        // Exclude notes past the next cue\n        if(i + 1 < arr.length && n.note >= arr[i + 1].note) return false;\n\n        // No farther than \"beats\"\n        if(n.note - note > beats) return false;\n\n        return true;\n      })\n      .map<[number, NoteAttributes]>((note) => {\n        const n: NoteAttributes = {\n          duration: note.duration,\n          pitch: note.pitch,\n        };\n\n        if(note.isTremelo)\n          n.isTremelo = note.isTremelo;\n\n        if(note.isCrescendo)\n          n.isCrescendo = note.isCrescendo;\n\n        return [ note.note, n ];\n      })\n      .filter((v, i, arr) => arr.findIndex(([note]) => note === v[0]) === i); // Unique\n\n      playNotes.sort(([a],[b]) => Math.sign(a - b));\n\n      const cues: Array<[number, InstrumentState, any]> = [];\n      cues.push([note - countIn, InstrumentState.CUE_READY, {\n        spriteUrl: options.spriteUrl,\n        motionFn: options.motionFn || {}\n      }]);\n      cues.push([note, InstrumentState.HIT, playNotes]);\n      return cues;\n    })\n    .reduce((acc, arr) => [...acc, ...arr], []);\n\n  res.sort(([a], [b]) => Math.sign(a - b));\n  return res;\n}\n\nexport const interactives: Array<{\n  name: string,\n  graphicsPath: () => void,\n  color: number,\n  cues: Array<[number, InstrumentState, any]>\n}> = [\n    {\n      name: \"cello\",\n      graphicsPath: celloGraphics,\n      color: 0xdbdbdb,\n      cues: [\n        ...getSoloCues({spriteUrl: celloIcon, motionFn: bassMotion})(parts.P34.notes), // Cello\n        ...getSoloCues({spriteUrl: celloIcon, motionFn: bassMotion})(parts.P35.notes) // Cell div\n      ],\n    },\n    {\n      name: \"bass\",\n      graphicsPath: bassGraphics,\n      color: 0xdbdbdb,\n      cues: getSoloCues({spriteUrl: bassIcon, motionFn: bassMotion})(\n        parts.P36.notes // Double bass\n      ),\n    },\n    {\n      name: \"brass\",\n      graphicsPath: brassGraphics,\n      color: 0xe8e8e8,\n      cues: [\n        ...getSoloCues({spriteUrl: trumpetIcon, motionFn: hornMotion})(parts.P10.notes), // Trumpet in Bb 1, 2\n        ...getSoloCues({spriteUrl: trumpetIcon, motionFn: hornMotion})(parts.P11.notes), // Trumpet in Bb 3\n      ],\n    },\n    {\n      name: \"brass2\",\n      graphicsPath: brass2Graphics,\n      color: 0xdbdbdb,\n      cues: [\n        ...getSoloCues({spriteUrl: brassIcon, motionFn: hornMotion})(parts.P12.notes), // Trombone\n        ...getSoloCues({spriteUrl: brassIcon, motionFn: hornMotion})(parts.P13.notes), // Bass Trombone\n        ...getSoloCues({spriteUrl: brassIcon, motionFn: hornMotion})(parts.P14.notes), // Cimbasso (sub. Tuba or C.B Trombone)\n      ],\n    },\n    {\n      name: \"harp\",\n      graphicsPath: harpGraphics,\n      color: 0xdbdbdb,\n      cues: getSoloCues({spriteUrl: harpIcon})(\n        parts.P21.notes, // Harp\n      ),\n    },\n    {\n      name: \"horn\",\n      graphicsPath: hornGraphics,\n      color: 0xdbdbdb,\n      cues: [\n        ...getSoloCues({spriteUrl: hornIcon, motionFn: hornDownMotion})(parts.P8.notes), // Horn in F 1, 2\n        ...getSoloCues({spriteUrl: hornIcon, motionFn: hornDownMotion})(parts.P9.notes), // Horn in F 3 (&amp; 4)\n      ]\n    },\n    {\n      name: \"percussion\",\n      graphicsPath: percussionGraphics,\n      color: 0xe8e8e8,\n      cues: [\n        ...getSoloCues({spriteUrl: timpaniIcon, motionFn: timpaniMotion})(parts.P15.notes), // Timpani\n        ...getSoloCues({spriteUrl: cymbalsIcon, motionFn: suspCymbMotion})(parts.P16.notes), // Cymbals\n        ...getSoloCues({spriteUrl: tamtamIcon, motionFn: gongMotion})(parts.P17.notes), // Tamtam\n      ],\n    },\n    {\n      name: \"piano\",\n      graphicsPath: pianoGraphics,\n      color: 0xdbdbdb,\n      cues: [\n        ...getSoloCues({spriteUrl: keyboardIcon})(parts.P19.notes),// Piano (Optional)\n        ...getSoloCues({spriteUrl: keyboardIcon})(parts.P18.notes),// Electric Piano (Pre-Record)\n      ],\n    },\n    {\n      name: \"viola\",\n      graphicsPath: violaGraphics,\n      color: 0xe8e8e8,\n      cues: [\n        ...getSoloCues({spriteUrl: stringIcon, motionFn: violinMotion})(parts.P26.notes), // Solo Viola\n        ...getSoloCues({spriteUrl: stringIcon, motionFn: violinMotion})(parts.P32.notes), // Viola\n        ...getSoloCues({spriteUrl: stringIcon, motionFn: violinMotion})(parts.P33.notes), // Viola DIV\n      ]\n    },\n    {\n      name: \"violin_1\",\n      graphicsPath: violin_1Graphics,\n      color: 0xe8e8e8,\n      cues: [\n        ...getSoloCues({spriteUrl: stringIcon, motionFn: violinMotion})(parts.P24.notes), // Solo Violin I\n        ...getSoloCues({spriteUrl: stringIcon, motionFn: violinMotion})(parts.P28.notes), // Violin I\n        ...getSoloCues({spriteUrl: stringIcon, motionFn: violinMotion})(parts.P29.notes), // Violin 1 DIV\n      ]\n    },\n    {\n      name: \"violin_2\",\n      graphicsPath: violin_2Graphics,\n      color: 0xdbdbdb,\n      cues: [\n        ...getSoloCues({spriteUrl: stringIcon, motionFn: violinMotion})(parts.P25.notes), // Solo  Violin II\n        ...getSoloCues({spriteUrl: stringIcon, motionFn: violinMotion})(parts.P30.notes), // Violin II\n        ...getSoloCues({spriteUrl: stringIcon, motionFn: violinMotion})(parts.P31.notes), // Violin II DIV\n      ]\n    },\n    {\n      name: \"woodwind\",\n      graphicsPath: woodwindGraphics,\n      color: 0xe8e8e8,\n      cues: [\n        ...getSoloCues({spriteUrl: fluteIcon, motionFn: fluteMotion})(parts.P1.notes), // Flute 1, 2\n        ...getSoloCues({spriteUrl: oboeIcon, motionFn: hornDownMotion})(parts.P2.notes), // Oboe\n        ...getSoloCues({spriteUrl: clarinetIcon, motionFn: hornDownMotion})(parts.P5.notes), // Bass Clarinet\n      ],\n    },\n    {\n      name: \"woodwind-2\",\n      graphicsPath: woodwind2Graphics,\n      color: 0xdbdbdb,\n      cues: [\n        ...getSoloCues({spriteUrl: clarinetIcon, motionFn: hornDownMotion})(parts.P4.notes), // Clarinet in Bb 1, 2\n        ...getSoloCues({spriteUrl: clarinetIcon, motionFn: hornDownMotion})(parts.P6.notes), // Bassoon 1, 2\n        ...getSoloCues({spriteUrl: clarinetIcon, motionFn: hornDownMotion})(parts.P7.notes), // Contrabassoon (Optional)\n      ],\n    },\n  ];","import { Container, Loader, Texture, Sprite, Graphics, Point } from \"pixi.js\";\n\nexport class VideoPlayer extends Container {\n  public isLoaded: boolean = false;\n  protected videoSprite: Sprite;\n  public nativeWidth: number;\n  public nativeHeight: number;\n  public nativeRatio: number;\n  protected videoData: HTMLVideoElement;\n  protected overlayGraphics: Graphics;\n  private animationFrameId: number;\n  public canInteract = true;\n  protected playButtonSizeRatio = 0.1;\n  statusText: string = \"Unloaded\";\n  private loadProgress: number = 0;\n  protected autoplay: boolean = false;\n\n  constructor(public videoUrl: string, public playerWidth: number = 256, public accentColor: number = 0xeeeeee) {\n    super();\n\n    this.overlayGraphics = new Graphics();\n    this.addChild(this.overlayGraphics);\n    this.updateGraphics();\n\n    this.interactive = true;\n    this.cursor = \"pointer\";\n    this.on('pointertap', () => {\n      if(this.canInteract) {\n        this.interact();\n      }\n    });\n  }\n\n  interact() {\n    this.playpause();\n  }\n\n  get volume(): number {\n    return this.videoData.volume;\n  }\n\n  set volume(v: number) {\n    this.videoData.volume = v;\n  }\n\n  playpause() {\n    if(this.videoData) {\n      if(this.videoData.paused) {\n        this.videoData.play();\n        this.emit(\"play\");\n        this.statusText = \"Playing\";\n        if(this.animationFrameId === -1) {\n          this.animationFrameId = window.requestAnimationFrame(this.updateGraphics.bind(this));\n        }\n      } else {\n        this.videoData.pause();\n        this.emit(\"pause\");\n        this.statusText = \"Paused\";\n        this.updateGraphics();\n        if(this.animationFrameId !== -1) {\n          window.cancelAnimationFrame(this.animationFrameId);\n          this.animationFrameId = -1;\n        }\n      }\n    }\n  }\n\n  pause() {\n    if(this.videoData && !this.videoData.paused) {\n      this.videoData.pause();\n      this.emit(\"pause\");\n      this.statusText = \"Paused\";\n      this.updateGraphics();\n      if(this.animationFrameId !== -1) {\n        window.cancelAnimationFrame(this.animationFrameId);\n        this.animationFrameId = -1;\n      }\n    }\n  }\n\n  resume() {\n    if(this.videoData && this.videoData.paused) {\n      this.videoData.play();\n      this.emit(\"play\");\n      this.statusText = \"Playing\";\n      if(this.animationFrameId === -1) {\n        this.animationFrameId = window.requestAnimationFrame(this.updateGraphics.bind(this));\n      }\n    }\n  }\n\n  set currentTime(value: number) {\n    this.videoData.currentTime = value;\n  }\n\n  get currentTime(): number {\n    return this.videoData.currentTime\n  }\n\n  get isPlaying(): boolean {\n    return !this.videoData.paused;\n  }\n\n  get duration(): number {\n    return this.videoData.duration;\n  }\n\n  get percentLoaded(): number {\n    return this.loadProgress;\n  }\n\n  playerEnded() {\n    this.emit(\"ended\");\n  }\n\n  async preload() {\n    this.statusText = \"Loading\";\n    let playEventSet = false;\n    if(!Loader.shared.resources[this.videoUrl]) {\n\n      // If not already loaded\n      await new Promise((resolve) => {\n        const loaderTimer = setInterval(() => {\n          if(typeof Loader.shared.resources[this.videoUrl] === \"undefined\") {\n            return;\n          }\n          try {\n            const buffered = Loader.shared.resources[this.videoUrl].data.buffered;\n            const total = Loader.shared.resources[this.videoUrl].data.duration;\n\n            const end = buffered.end(0);\n\n            this.loadProgress = end/total;\n          } catch {}\n\n          if(!playEventSet) {\n            Loader.shared.resources[this.videoUrl].data.addEventListener(\"playing\", doneLoading);\n            Loader.shared.resources[this.videoUrl].data.addEventListener(\"play\", doneLoading);\n            Loader.shared.resources[this.videoUrl].data.addEventListener(\"canplaythrough\", doneLoading);\n            playEventSet = true;\n          }\n\n        },200);\n\n        const doneLoading = () => {\n          clearInterval(loaderTimer);\n          Loader.shared.resources[this.videoUrl].data.removeEventListener(\"playing\", doneLoading);\n          Loader.shared.resources[this.videoUrl].data.removeEventListener(\"play\", doneLoading);\n          Loader.shared.resources[this.videoUrl].data.removeEventListener(\"canplaythrough\", doneLoading);\n          resolve();\n        }\n\n        Loader.shared.add(this.videoUrl).load(doneLoading);\n\n      });\n    }\n\n    await new Promise((resolve) => {\n      Loader.shared.onComplete.once(resolve);\n    });\n\n    this.loadProgress = 1;\n\n    this.videoData = Loader.shared.resources[this.videoUrl].data;\n    const videoBaseTexture: Texture = Texture.from(this.videoData);\n\n    this.videoData.addEventListener(\"ended\", this.playerEnded.bind(this));\n\n    this.videoData.loop = false;\n    this.videoData.autoplay = this.autoplay;\n\n    if(!this.autoplay) {\n      setTimeout(() => {\n        this.videoData.currentTime = 0;\n      }, 0);\n    }\n\n    this.videoSprite = new Sprite(videoBaseTexture);\n    this.nativeWidth = this.videoSprite.width;\n    this.nativeHeight = this.videoSprite.height;\n    this.nativeRatio = this.nativeWidth / this.nativeHeight;\n\n    this.addChild(this.videoSprite);\n    this.videoSprite.position.set(0,0);\n    this.isLoaded = true;\n\n    // Bring overlay back to top\n    this.removeChild(this.overlayGraphics);\n    this.addChild(this.overlayGraphics);\n\n    this.statusText = \"Paused\";\n    this.resizeVideo(this.playerWidth);\n  }\n\n  resizeVideo(playerWidth: number) {\n    this.playerWidth = playerWidth;\n    const scale = this.playerWidth / this.nativeWidth;\n    this.videoSprite.scale.set(scale);\n    this.updateGraphics();\n  }\n\n  updateGraphics() {\n    if(this.videoSprite) {\n      this.overlayGraphics.visible = true;\n      this.overlayGraphics.position.set(this.playerWidth / 2, this.videoSprite.height / 2);\n    } else {\n      this.overlayGraphics.visible = false;\n    }\n    this.animationFrameId = window.requestAnimationFrame(this.updateGraphics.bind(this));\n    this.overlayGraphics.clear();\n    if(this.videoData) {\n      if(this.videoData.paused && this.canInteract) {\n        this.overlayGraphics.beginFill(this.accentColor);\n        const r = this.playerWidth*this.playButtonSizeRatio;\n        const c = Math.cos(Math.PI * 2/3);\n        const s = Math.sin(Math.PI * 2/3);\n        this.overlayGraphics.drawPolygon([\n          new Point(c * r, -s * r),\n          new Point(r, 0),\n          new Point(c * r, s * r),\n        ])\n        this.overlayGraphics.endFill();\n      }\n    }\n  }\n\n  destroy() {\n    // @TODO - clear loading of video if still in progress\n    super.destroy();\n    if(this.videoData) {\n      this.videoData.removeEventListener(\"ended\", this.playerEnded.bind(this));\n      this.videoData.currentTime = 0;\n      this.videoData.pause();\n    }\n  }\n}"],"sourceRoot":""}